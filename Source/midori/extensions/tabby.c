/* tabby.c generated by valac 0.20.1, the Vala compiler
 * generated from tabby.vala, do not modify */

/*
   Copyright (C) 2013 André Stösel <andre@stoesel.de>

   This library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   See the file COPYING for the full license text.
*/

#include <glib.h>
#include <glib-object.h>
#include "midori/midori.h"
#include "katze/katze.h"
#include <gtk/gtk.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <gdk/gdk.h>
#include "midori/midori-websettings.h"
#include "midori/midori-view.h"
#include "midori-core.h"
#include "webkit2/webkit2.h"
#include <glib/gi18n-lib.h>
#include "midori/midori-array.h"
#include "midori/sokoke.h"


#define TABBY_TYPE_ISTORAGE (tabby_istorage_get_type ())
#define TABBY_ISTORAGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_ISTORAGE, TabbyIStorage))
#define TABBY_IS_ISTORAGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_ISTORAGE))
#define TABBY_ISTORAGE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), TABBY_TYPE_ISTORAGE, TabbyIStorageIface))

typedef struct _TabbyIStorage TabbyIStorage;
typedef struct _TabbyIStorageIface TabbyIStorageIface;

#define TABBY_BASE_TYPE_SESSION (tabby_base_session_get_type ())
#define TABBY_BASE_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_BASE_TYPE_SESSION, TabbyBaseSession))
#define TABBY_BASE_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_BASE_TYPE_SESSION, TabbyBaseSessionClass))
#define TABBY_BASE_IS_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_BASE_TYPE_SESSION))
#define TABBY_BASE_IS_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_BASE_TYPE_SESSION))
#define TABBY_BASE_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_BASE_TYPE_SESSION, TabbyBaseSessionClass))

typedef struct _TabbyBaseSession TabbyBaseSession;
typedef struct _TabbyBaseSessionClass TabbyBaseSessionClass;

#define TABBY_TYPE_ISESSION (tabby_isession_get_type ())
#define TABBY_ISESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_ISESSION, TabbyISession))
#define TABBY_IS_ISESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_ISESSION))
#define TABBY_ISESSION_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), TABBY_TYPE_ISESSION, TabbyISessionIface))

typedef struct _TabbyISession TabbyISession;
typedef struct _TabbyISessionIface TabbyISessionIface;

#define TABBY_TYPE_SESSION_STATE (tabby_session_state_get_type ())

#define TABBY_BASE_TYPE_STORAGE (tabby_base_storage_get_type ())
#define TABBY_BASE_STORAGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_BASE_TYPE_STORAGE, TabbyBaseStorage))
#define TABBY_BASE_STORAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_BASE_TYPE_STORAGE, TabbyBaseStorageClass))
#define TABBY_BASE_IS_STORAGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_BASE_TYPE_STORAGE))
#define TABBY_BASE_IS_STORAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_BASE_TYPE_STORAGE))
#define TABBY_BASE_STORAGE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_BASE_TYPE_STORAGE, TabbyBaseStorageClass))

typedef struct _TabbyBaseStorage TabbyBaseStorage;
typedef struct _TabbyBaseStorageClass TabbyBaseStorageClass;
typedef struct _TabbyBaseStoragePrivate TabbyBaseStoragePrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _TabbyBaseSessionPrivate TabbyBaseSessionPrivate;
#define __g_slist_free__g_free0_0(var) ((var == NULL) ? NULL : (var = (_g_slist_free__g_free0_ (var), NULL)))
typedef struct _Block1Data Block1Data;
#define _g_ptr_array_free0(var) ((var == NULL) ? NULL : (var = (g_ptr_array_free (var, TRUE), NULL)))
typedef struct _Block2Data Block2Data;

#define TABBY_LOCAL_TYPE_SESSION (tabby_local_session_get_type ())
#define TABBY_LOCAL_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_LOCAL_TYPE_SESSION, TabbyLocalSession))
#define TABBY_LOCAL_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_LOCAL_TYPE_SESSION, TabbyLocalSessionClass))
#define TABBY_LOCAL_IS_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_LOCAL_TYPE_SESSION))
#define TABBY_LOCAL_IS_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_LOCAL_TYPE_SESSION))
#define TABBY_LOCAL_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_LOCAL_TYPE_SESSION, TabbyLocalSessionClass))

typedef struct _TabbyLocalSession TabbyLocalSession;
typedef struct _TabbyLocalSessionClass TabbyLocalSessionClass;
typedef struct _TabbyLocalSessionPrivate TabbyLocalSessionPrivate;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))

#define TABBY_LOCAL_TYPE_STORAGE (tabby_local_storage_get_type ())
#define TABBY_LOCAL_STORAGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_LOCAL_TYPE_STORAGE, TabbyLocalStorage))
#define TABBY_LOCAL_STORAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_LOCAL_TYPE_STORAGE, TabbyLocalStorageClass))
#define TABBY_LOCAL_IS_STORAGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_LOCAL_TYPE_STORAGE))
#define TABBY_LOCAL_IS_STORAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_LOCAL_TYPE_STORAGE))
#define TABBY_LOCAL_STORAGE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_LOCAL_TYPE_STORAGE, TabbyLocalStorageClass))

typedef struct _TabbyLocalStorage TabbyLocalStorage;
typedef struct _TabbyLocalStorageClass TabbyLocalStorageClass;
typedef struct _TabbyLocalStoragePrivate TabbyLocalStoragePrivate;
typedef struct _Block3Data Block3Data;

#define TABBY_TYPE_MANAGER (tabby_manager_get_type ())
#define TABBY_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_MANAGER, TabbyManager))
#define TABBY_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_TYPE_MANAGER, TabbyManagerClass))
#define TABBY_IS_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_MANAGER))
#define TABBY_IS_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_TYPE_MANAGER))
#define TABBY_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_TYPE_MANAGER, TabbyManagerClass))

typedef struct _TabbyManager TabbyManager;
typedef struct _TabbyManagerClass TabbyManagerClass;
typedef struct _TabbyManagerPrivate TabbyManagerPrivate;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _TabbyIStorageIface {
	GTypeInterface parent_iface;
	KatzeArray* (*get_saved_sessions) (TabbyIStorage* self);
	TabbyBaseSession* (*get_new_session) (TabbyIStorage* self);
	void (*restore_last_sessions) (TabbyIStorage* self);
	void (*import_session) (TabbyIStorage* self, KatzeArray* tabs);
};

struct _TabbyISessionIface {
	GTypeInterface parent_iface;
	KatzeArray* (*get_tabs) (TabbyISession* self);
	void (*add_item) (TabbyISession* self, KatzeItem* item);
	void (*attach) (TabbyISession* self, MidoriBrowser* browser);
	void (*restore) (TabbyISession* self, MidoriBrowser* browser);
	void (*remove) (TabbyISession* self);
	void (*close) (TabbyISession* self);
};

typedef enum  {
	TABBY_SESSION_STATE_OPEN,
	TABBY_SESSION_STATE_CLOSED,
	TABBY_SESSION_STATE_RESTORING
} TabbySessionState;

struct _TabbyBaseStorage {
	GObject parent_instance;
	TabbyBaseStoragePrivate * priv;
};

struct _TabbyBaseStorageClass {
	GObjectClass parent_class;
	KatzeArray* (*get_saved_sessions) (TabbyBaseStorage* self);
	TabbyBaseSession* (*get_new_session) (TabbyBaseStorage* self);
	void (*import_session) (TabbyBaseStorage* self, KatzeArray* tabs);
};

struct _TabbyBaseStoragePrivate {
	MidoriApp* _app;
};

struct _TabbyBaseSession {
	GObject parent_instance;
	TabbyBaseSessionPrivate * priv;
	GSList* tab_sorting;
};

struct _TabbyBaseSessionClass {
	GObjectClass parent_class;
	void (*add_item) (TabbyBaseSession* self, KatzeItem* item);
	void (*uri_changed) (TabbyBaseSession* self, MidoriView* view, const gchar* uri);
	void (*data_changed) (TabbyBaseSession* self, MidoriView* view);
	void (*tab_added) (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
	void (*tab_removed) (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
	void (*tab_switched) (TabbyBaseSession* self, MidoriView* old_view, MidoriView* new_view);
	void (*tab_reordered) (TabbyBaseSession* self, GtkWidget* tab, guint pos);
	void (*remove) (TabbyBaseSession* self);
	KatzeArray* (*get_tabs) (TabbyBaseSession* self);
	gdouble (*get_max_sorting) (TabbyBaseSession* self);
	void (*close) (TabbyBaseSession* self);
};

struct _TabbyBaseSessionPrivate {
	MidoriBrowser* _browser;
	TabbySessionState _state;
};

struct _Block1Data {
	int _ref_count_;
	TabbyBaseSession * self;
	GList* items;
	GList* u_items;
	gboolean delay;
	gboolean should_delay;
	MidoriBrowser* browser;
};

struct _Block2Data {
	int _ref_count_;
	TabbyBaseSession * self;
	MidoriView* view;
};

struct _TabbyLocalSession {
	TabbyBaseSession parent_instance;
	TabbyLocalSessionPrivate * priv;
};

struct _TabbyLocalSessionClass {
	TabbyBaseSessionClass parent_class;
};

struct _TabbyLocalSessionPrivate {
	gint64 _id;
	MidoriDatabase* database;
};

struct _TabbyLocalStorage {
	TabbyBaseStorage parent_instance;
	TabbyLocalStoragePrivate * priv;
};

struct _TabbyLocalStorageClass {
	TabbyBaseStorageClass parent_class;
};

struct _TabbyLocalStoragePrivate {
	MidoriDatabase* database;
};

struct _Block3Data {
	int _ref_count_;
	TabbyLocalStorage * self;
	KatzeArray* tabs;
};

struct _TabbyManager {
	MidoriExtension parent_instance;
	TabbyManagerPrivate * priv;
};

struct _TabbyManagerClass {
	MidoriExtensionClass parent_class;
};

struct _TabbyManagerPrivate {
	TabbyBaseStorage* storage;
};


extern gint tabby_IDLE_RESTORE_COUNT;
gint tabby_IDLE_RESTORE_COUNT = 13;
extern MidoriApp* tabby_APP;
MidoriApp* tabby_APP = NULL;
static gpointer tabby_base_storage_parent_class = NULL;
static TabbyIStorageIface* tabby_base_storage_tabby_istorage_parent_iface = NULL;
static gpointer tabby_base_session_parent_class = NULL;
static TabbyISessionIface* tabby_base_session_tabby_isession_parent_iface = NULL;
static gpointer tabby_local_session_parent_class = NULL;
static gpointer tabby_local_storage_parent_class = NULL;
static gpointer tabby_manager_parent_class = NULL;

GType tabby_base_session_get_type (void) G_GNUC_CONST;
GType tabby_istorage_get_type (void) G_GNUC_CONST;
KatzeArray* tabby_istorage_get_saved_sessions (TabbyIStorage* self);
TabbyBaseSession* tabby_istorage_get_new_session (TabbyIStorage* self);
void tabby_istorage_restore_last_sessions (TabbyIStorage* self);
void tabby_istorage_import_session (TabbyIStorage* self, KatzeArray* tabs);
GType tabby_isession_get_type (void) G_GNUC_CONST;
KatzeArray* tabby_isession_get_tabs (TabbyISession* self);
void tabby_isession_add_item (TabbyISession* self, KatzeItem* item);
void tabby_isession_attach (TabbyISession* self, MidoriBrowser* browser);
void tabby_isession_restore (TabbyISession* self, MidoriBrowser* browser);
void tabby_isession_remove (TabbyISession* self);
void tabby_isession_close (TabbyISession* self);
GType tabby_session_state_get_type (void) G_GNUC_CONST;
GType tabby_base_storage_get_type (void) G_GNUC_CONST;
#define TABBY_BASE_STORAGE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_BASE_TYPE_STORAGE, TabbyBaseStoragePrivate))
enum  {
	TABBY_BASE_STORAGE_DUMMY_PROPERTY,
	TABBY_BASE_STORAGE_APP
};
KatzeArray* tabby_base_storage_get_saved_sessions (TabbyBaseStorage* self);
static KatzeArray* tabby_base_storage_real_get_saved_sessions (TabbyBaseStorage* self);
TabbyBaseSession* tabby_base_storage_get_new_session (TabbyBaseStorage* self);
static TabbyBaseSession* tabby_base_storage_real_get_new_session (TabbyBaseStorage* self);
void tabby_base_storage_start_new_session (TabbyBaseStorage* self);
static void tabby_base_storage_init_sessions (TabbyBaseStorage* self, KatzeArray* sessions);
static void tabby_base_storage_real_restore_last_sessions (TabbyIStorage* base);
MidoriApp* tabby_base_storage_get_app (TabbyBaseStorage* self);
void tabby_base_storage_import_session (TabbyBaseStorage* self, KatzeArray* tabs);
static void tabby_base_storage_real_import_session (TabbyBaseStorage* self, KatzeArray* tabs);
void tabby_base_session_add_item (TabbyBaseSession* self, KatzeItem* item);
TabbyBaseStorage* tabby_base_storage_construct (GType object_type);
static void tabby_base_storage_set_app (TabbyBaseStorage* self, MidoriApp* value);
static void tabby_base_storage_finalize (GObject* obj);
static void _vala_tabby_base_storage_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_tabby_base_storage_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
#define TABBY_BASE_SESSION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_BASE_TYPE_SESSION, TabbyBaseSessionPrivate))
enum  {
	TABBY_BASE_SESSION_DUMMY_PROPERTY,
	TABBY_BASE_SESSION_BROWSER,
	TABBY_BASE_SESSION_STATE
};
static void _g_free0_ (gpointer var);
static void _g_slist_free__g_free0_ (GSList* self);
static void tabby_base_session_real_add_item (TabbyBaseSession* self, KatzeItem* item);
void tabby_base_session_uri_changed (TabbyBaseSession* self, MidoriView* view, const gchar* uri);
static void tabby_base_session_real_uri_changed (TabbyBaseSession* self, MidoriView* view, const gchar* uri);
void tabby_base_session_data_changed (TabbyBaseSession* self, MidoriView* view);
static void tabby_base_session_real_data_changed (TabbyBaseSession* self, MidoriView* view);
void tabby_base_session_tab_added (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
static void tabby_base_session_real_tab_added (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
void tabby_base_session_tab_removed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
static void tabby_base_session_real_tab_removed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
void tabby_base_session_tab_switched (TabbyBaseSession* self, MidoriView* old_view, MidoriView* new_view);
static void tabby_base_session_real_tab_switched (TabbyBaseSession* self, MidoriView* old_view, MidoriView* new_view);
void tabby_base_session_tab_reordered (TabbyBaseSession* self, GtkWidget* tab, guint pos);
static void tabby_base_session_real_tab_reordered (TabbyBaseSession* self, GtkWidget* tab, guint pos);
void tabby_base_session_remove (TabbyBaseSession* self);
static void tabby_base_session_real_remove (TabbyBaseSession* self);
KatzeArray* tabby_base_session_get_tabs (TabbyBaseSession* self);
static KatzeArray* tabby_base_session_real_get_tabs (TabbyBaseSession* self);
gdouble tabby_base_session_get_max_sorting (TabbyBaseSession* self);
static gdouble tabby_base_session_real_get_max_sorting (TabbyBaseSession* self);
static void tabby_base_session_real_attach (TabbyISession* base, MidoriBrowser* browser);
void tabby_base_session_set_browser (TabbyBaseSession* self, MidoriBrowser* value);
static void _tabby_base_session_tab_added_midori_browser_add_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self);
static void tabby_base_session_helper_data_changed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view);
static void _tabby_base_session_helper_data_changed_midori_browser_add_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self);
static void _tabby_base_session_tab_removed_midori_browser_remove_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self);
static void _tabby_base_session_tab_switched_midori_browser_switch_tab (MidoriBrowser* _sender, MidoriView* old_view, MidoriView* new_view, gpointer self);
gboolean tabby_base_session_delete_event (TabbyBaseSession* self, GtkWidget* widget, GdkEventAny* event);
static gboolean _tabby_base_session_delete_event_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
static void _tabby_base_session_tab_reordered_gtk_notebook_page_reordered (GtkNotebook* _sender, GtkWidget* child, guint page_num, gpointer self);
void tabby_base_session_set_state (TabbyBaseSession* self, TabbySessionState value);
static void tabby_base_session_real_restore (TabbyISession* base, MidoriBrowser* browser);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gboolean __lambda4_ (Block1Data* _data1_);
static void tabby_base_session_helper_reorder_tabs (TabbyBaseSession* self, GPtrArray* new_tabs);
static gboolean ___lambda4__gsource_func (gpointer self);
void tabby_base_session_close (TabbyBaseSession* self);
static void tabby_base_session_real_close (TabbyBaseSession* self);
TabbySessionState tabby_base_session_get_state (TabbyBaseSession* self);
MidoriBrowser* tabby_base_session_get_browser (TabbyBaseSession* self);
gdouble tabby_base_session_get_tab_sorting (TabbyBaseSession* self, MidoriView* view);
static void tabby_base_session_load_status (TabbyBaseSession* self, GObject* _view, GParamSpec* pspec);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void ____lambda2_ (Block2Data* _data2_);
static void _____lambda2__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void ____lambda3_ (Block2Data* _data2_);
static void _____lambda3__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void _tabby_base_session_load_status_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void tabby_base_session_helper_duplicate_tab (TabbyBaseSession* self, MidoriView* view, MidoriView* new_view, MidoriNewView where, gboolean user_initiated);
static void _tabby_base_session_helper_duplicate_tab_midori_view_new_view (MidoriView* _sender, MidoriView* new_view, MidoriNewView where, gboolean user_initiated, gpointer self);
static gint __lambda5_ (TabbyBaseSession* self, gdouble* a, gdouble* b);
static gint ___lambda5__gcompare_data_func (gconstpointer a, gconstpointer b, gpointer self);
static gint __lambda6_ (gdouble* a, gdouble* b);
static gboolean _double_equal (const gdouble* s1, const gdouble* s2);
static gint ___lambda6__gcompare_func (gconstpointer a, gconstpointer b);
static gdouble* _double_dup (gdouble* self);
TabbyBaseSession* tabby_base_session_construct (GType object_type);
static GObject * tabby_base_session_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static void tabby_base_session_finalize (GObject* obj);
static void _vala_tabby_base_session_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_tabby_base_session_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
GType tabby_local_session_get_type (void) G_GNUC_CONST;
#define TABBY_LOCAL_SESSION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_LOCAL_TYPE_SESSION, TabbyLocalSessionPrivate))
enum  {
	TABBY_LOCAL_SESSION_DUMMY_PROPERTY,
	TABBY_LOCAL_SESSION_ID
};
static void tabby_local_session_real_add_item (TabbyBaseSession* base, KatzeItem* item);
gint64 tabby_local_session_get_id (TabbyLocalSession* self);
static void tabby_local_session_real_uri_changed (TabbyBaseSession* base, MidoriView* view, const gchar* uri);
static void tabby_local_session_real_data_changed (TabbyBaseSession* base, MidoriView* view);
static void tabby_local_session_real_tab_added (TabbyBaseSession* base, MidoriBrowser* browser, MidoriView* view);
static void tabby_local_session_real_tab_removed (TabbyBaseSession* base, MidoriBrowser* browser, MidoriView* view);
static void tabby_local_session_real_tab_switched (TabbyBaseSession* base, MidoriView* old_view, MidoriView* new_view);
static void tabby_local_session_real_tab_reordered (TabbyBaseSession* base, GtkWidget* tab, guint pos);
static void tabby_local_session_real_remove (TabbyBaseSession* base);
static void tabby_local_session_real_close (TabbyBaseSession* base);
static KatzeArray* tabby_local_session_real_get_tabs (TabbyBaseSession* base);
static gdouble tabby_local_session_real_get_max_sorting (TabbyBaseSession* base);
TabbyLocalSession* tabby_local_session_new (MidoriDatabase* database);
TabbyLocalSession* tabby_local_session_construct (GType object_type, MidoriDatabase* database);
static void tabby_local_session_set_id (TabbyLocalSession* self, gint64 value);
TabbyLocalSession* tabby_local_session_new_with_id (MidoriDatabase* database, gint64 id);
TabbyLocalSession* tabby_local_session_construct_with_id (GType object_type, MidoriDatabase* database, gint64 id);
static void tabby_local_session_finalize (GObject* obj);
static void _vala_tabby_local_session_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_tabby_local_session_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
GType tabby_local_storage_get_type (void) G_GNUC_CONST;
#define TABBY_LOCAL_STORAGE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_LOCAL_TYPE_STORAGE, TabbyLocalStoragePrivate))
enum  {
	TABBY_LOCAL_STORAGE_DUMMY_PROPERTY
};
static KatzeArray* tabby_local_storage_real_get_saved_sessions (TabbyBaseStorage* base);
static void tabby_local_storage_real_import_session (TabbyBaseStorage* base, KatzeArray* tabs);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static gboolean ___lambda7_ (Block3Data* _data3_, GError** error);
static gboolean ____lambda7__midori_database_callback (gpointer self, GError** error);
static TabbyBaseSession* tabby_local_storage_real_get_new_session (TabbyBaseStorage* base);
TabbyLocalStorage* tabby_local_storage_new (MidoriApp* app);
TabbyLocalStorage* tabby_local_storage_construct (GType object_type, MidoriApp* app);
static void tabby_local_storage_finalize (GObject* obj);
GType tabby_manager_get_type (void) G_GNUC_CONST;
#define TABBY_MANAGER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_TYPE_MANAGER, TabbyManagerPrivate))
enum  {
	TABBY_MANAGER_DUMMY_PROPERTY
};
static gboolean tabby_manager_load_session (TabbyManager* self);
static gboolean tabby_manager_execute_commands (TabbyManager* self);
static gboolean _tabby_manager_execute_commands_gsource_func (gpointer self);
static void tabby_manager_set_open_uris (TabbyManager* self, MidoriBrowser* browser);
static void _tabby_manager_set_open_uris_midori_app_add_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self);
static void tabby_manager_browser_added (TabbyManager* self, MidoriBrowser* browser);
static void tabby_manager_browser_removed (TabbyManager* self, MidoriBrowser* browser);
static void tabby_manager_activated (TabbyManager* self, MidoriApp* app);
static void _tabby_manager_browser_added_midori_app_add_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self);
static void _tabby_manager_browser_removed_midori_app_remove_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self);
static gboolean _tabby_manager_load_session_gsource_func (gpointer self);
static void tabby_manager_deactivated (TabbyManager* self);
TabbyManager* tabby_manager_new (void);
TabbyManager* tabby_manager_construct (GType object_type);
static void _tabby_manager_activated_midori_extension_activate (MidoriExtension* _sender, MidoriApp* app, gpointer self);
static void _tabby_manager_deactivated_midori_extension_deactivate (MidoriExtension* _sender, gpointer self);
static void tabby_manager_finalize (GObject* obj);
MidoriExtension* extension_init (void);


KatzeArray* tabby_istorage_get_saved_sessions (TabbyIStorage* self) {
#line 19 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 19 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_ISTORAGE_GET_INTERFACE (self)->get_saved_sessions (self);
#line 437 "tabby.c"
}


TabbyBaseSession* tabby_istorage_get_new_session (TabbyIStorage* self) {
#line 20 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 20 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_ISTORAGE_GET_INTERFACE (self)->get_new_session (self);
#line 446 "tabby.c"
}


void tabby_istorage_restore_last_sessions (TabbyIStorage* self) {
#line 21 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 21 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISTORAGE_GET_INTERFACE (self)->restore_last_sessions (self);
#line 455 "tabby.c"
}


void tabby_istorage_import_session (TabbyIStorage* self, KatzeArray* tabs) {
#line 22 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 22 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISTORAGE_GET_INTERFACE (self)->import_session (self, tabs);
#line 464 "tabby.c"
}


static void tabby_istorage_base_init (TabbyIStorageIface * iface) {
#line 18 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	static gboolean initialized = FALSE;
#line 18 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (!initialized) {
#line 18 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		initialized = TRUE;
#line 475 "tabby.c"
	}
}


GType tabby_istorage_get_type (void) {
	static volatile gsize tabby_istorage_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_istorage_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyIStorageIface), (GBaseInitFunc) tabby_istorage_base_init, (GBaseFinalizeFunc) NULL, (GClassInitFunc) NULL, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
		GType tabby_istorage_type_id;
		tabby_istorage_type_id = g_type_register_static (G_TYPE_INTERFACE, "TabbyIStorage", &g_define_type_info, 0);
		g_type_interface_add_prerequisite (tabby_istorage_type_id, G_TYPE_OBJECT);
		g_once_init_leave (&tabby_istorage_type_id__volatile, tabby_istorage_type_id);
	}
	return tabby_istorage_type_id__volatile;
}


KatzeArray* tabby_isession_get_tabs (TabbyISession* self) {
#line 26 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 26 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_ISESSION_GET_INTERFACE (self)->get_tabs (self);
#line 498 "tabby.c"
}


void tabby_isession_add_item (TabbyISession* self, KatzeItem* item) {
#line 28 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 28 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISESSION_GET_INTERFACE (self)->add_item (self, item);
#line 507 "tabby.c"
}


void tabby_isession_attach (TabbyISession* self, MidoriBrowser* browser) {
#line 30 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 30 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISESSION_GET_INTERFACE (self)->attach (self, browser);
#line 516 "tabby.c"
}


void tabby_isession_restore (TabbyISession* self, MidoriBrowser* browser) {
#line 32 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 32 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISESSION_GET_INTERFACE (self)->restore (self, browser);
#line 525 "tabby.c"
}


void tabby_isession_remove (TabbyISession* self) {
#line 34 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 34 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISESSION_GET_INTERFACE (self)->remove (self);
#line 534 "tabby.c"
}


void tabby_isession_close (TabbyISession* self) {
#line 36 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 36 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_ISESSION_GET_INTERFACE (self)->close (self);
#line 543 "tabby.c"
}


static void tabby_isession_base_init (TabbyISessionIface * iface) {
#line 25 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	static gboolean initialized = FALSE;
#line 25 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (!initialized) {
#line 25 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		initialized = TRUE;
#line 554 "tabby.c"
	}
}


GType tabby_isession_get_type (void) {
	static volatile gsize tabby_isession_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_isession_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyISessionIface), (GBaseInitFunc) tabby_isession_base_init, (GBaseFinalizeFunc) NULL, (GClassInitFunc) NULL, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
		GType tabby_isession_type_id;
		tabby_isession_type_id = g_type_register_static (G_TYPE_INTERFACE, "TabbyISession", &g_define_type_info, 0);
		g_type_interface_add_prerequisite (tabby_isession_type_id, G_TYPE_OBJECT);
		g_once_init_leave (&tabby_isession_type_id__volatile, tabby_isession_type_id);
	}
	return tabby_isession_type_id__volatile;
}


GType tabby_session_state_get_type (void) {
	static volatile gsize tabby_session_state_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_session_state_type_id__volatile)) {
		static const GEnumValue values[] = {{TABBY_SESSION_STATE_OPEN, "TABBY_SESSION_STATE_OPEN", "open"}, {TABBY_SESSION_STATE_CLOSED, "TABBY_SESSION_STATE_CLOSED", "closed"}, {TABBY_SESSION_STATE_RESTORING, "TABBY_SESSION_STATE_RESTORING", "restoring"}, {0, NULL, NULL}};
		GType tabby_session_state_type_id;
		tabby_session_state_type_id = g_enum_register_static ("TabbySessionState", values);
		g_once_init_leave (&tabby_session_state_type_id__volatile, tabby_session_state_type_id);
	}
	return tabby_session_state_type_id__volatile;
}


static KatzeArray* tabby_base_storage_real_get_saved_sessions (TabbyBaseStorage* self) {
#line 51 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_storage_get_saved_sessions'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 51 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return NULL;
#line 589 "tabby.c"
}


KatzeArray* tabby_base_storage_get_saved_sessions (TabbyBaseStorage* self) {
#line 51 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 51 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_BASE_STORAGE_GET_CLASS (self)->get_saved_sessions (self);
#line 598 "tabby.c"
}


static TabbyBaseSession* tabby_base_storage_real_get_new_session (TabbyBaseStorage* self) {
#line 52 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_storage_get_new_session'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 52 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return NULL;
#line 607 "tabby.c"
}


TabbyBaseSession* tabby_base_storage_get_new_session (TabbyBaseStorage* self) {
#line 52 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 52 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_BASE_STORAGE_GET_CLASS (self)->get_new_session (self);
#line 616 "tabby.c"
}


void tabby_base_storage_start_new_session (TabbyBaseStorage* self) {
	KatzeArray* _tmp0_;
	KatzeArray* sessions;
#line 54 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 55 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = katze_array_new (TABBY_BASE_TYPE_SESSION);
#line 55 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sessions = _tmp0_;
#line 56 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_storage_init_sessions (self, sessions);
#line 54 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (sessions);
#line 633 "tabby.c"
}


static void tabby_base_storage_real_restore_last_sessions (TabbyIStorage* base) {
	TabbyBaseStorage * self;
	KatzeArray* _tmp0_ = NULL;
	KatzeArray* sessions;
#line 59 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyBaseStorage*) base;
#line 60 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_base_storage_get_saved_sessions (self);
#line 60 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sessions = _tmp0_;
#line 61 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_storage_init_sessions (self, sessions);
#line 59 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (sessions);
#line 651 "tabby.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self ? g_object_ref (self) : NULL;
#line 658 "tabby.c"
}


static void tabby_base_storage_init_sessions (TabbyBaseStorage* self, KatzeArray* sessions) {
	KatzeArray* _tmp0_;
	gboolean _tmp1_ = FALSE;
	KatzeArray* _tmp5_;
	GList* _tmp6_ = NULL;
	GList* items;
	GList* _tmp7_;
#line 64 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 64 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (sessions != NULL);
#line 65 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = sessions;
#line 65 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = katze_array_is_empty (_tmp0_);
#line 65 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp1_) {
#line 679 "tabby.c"
		KatzeArray* _tmp2_;
		TabbyBaseSession* _tmp3_ = NULL;
		TabbyBaseSession* _tmp4_;
#line 66 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = sessions;
#line 66 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = tabby_base_storage_get_new_session (self);
#line 66 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = _tmp3_;
#line 66 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_emit_by_name (_tmp2_, "add-item", (GObject*) _tmp4_);
#line 66 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp4_);
#line 693 "tabby.c"
	}
#line 69 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = sessions;
#line 69 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = katze_array_get_items (_tmp5_);
#line 69 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	items = _tmp6_;
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = items;
#line 703 "tabby.c"
	{
		GList* item_collection = NULL;
		GList* item_it = NULL;
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		item_collection = _tmp7_;
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		for (item_it = item_collection; item_it != NULL; item_it = item_it->next) {
#line 711 "tabby.c"
			KatzeItem* _tmp8_;
			KatzeItem* item = NULL;
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp8_ = _g_object_ref0 ((KatzeItem*) item_it->data);
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			item = _tmp8_;
#line 718 "tabby.c"
			{
				KatzeItem* _tmp9_;
				TabbyBaseSession* _tmp10_;
				TabbyBaseSession* session;
				MidoriApp* _tmp11_;
				MidoriBrowser* _tmp12_ = NULL;
				MidoriBrowser* browser;
				MidoriBrowser* _tmp13_;
				TabbyBaseSession* _tmp14_;
				TabbyBaseSession* _tmp15_;
				MidoriApp* _tmp16_;
				MidoriBrowser* _tmp17_;
				MidoriBrowser* _tmp18_;
				TabbyBaseSession* _tmp19_;
				MidoriBrowser* _tmp20_;
#line 71 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp9_ = item;
#line 71 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp10_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp9_, TABBY_BASE_TYPE_SESSION) ? ((TabbyBaseSession*) _tmp9_) : NULL);
#line 71 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				session = _tmp10_;
#line 72 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp11_ = self->priv->_app;
#line 72 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp12_ = midori_app_create_browser (_tmp11_);
#line 72 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				browser = _tmp12_;
#line 75 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp13_ = browser;
#line 75 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp14_ = session;
#line 75 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, TABBY_BASE_TYPE_SESSION) ? ((TabbyBaseSession*) _tmp14_) : NULL);
#line 75 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				g_object_set_data_full ((GObject*) _tmp13_, "tabby-session", _tmp15_, g_object_unref);
#line 77 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp16_ = self->priv->_app;
#line 77 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp17_ = browser;
#line 77 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				midori_app_add_browser (_tmp16_, _tmp17_);
#line 78 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp18_ = browser;
#line 78 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				gtk_widget_show ((GtkWidget*) _tmp18_);
#line 80 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp19_ = session;
#line 80 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp20_ = browser;
#line 80 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				tabby_isession_restore ((TabbyISession*) _tmp19_, _tmp20_);
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (browser);
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (session);
#line 70 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 776 "tabby.c"
			}
		}
	}
#line 64 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_list_free0 (items);
#line 782 "tabby.c"
}


static gchar* double_to_string (gdouble self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gint _tmp1__length1;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_;
	gchar* _tmp4_;
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp0_ = g_new0 (gchar, G_ASCII_DTOSTR_BUF_SIZE);
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp1__length1 = G_ASCII_DTOSTR_BUF_SIZE;
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp2_ = g_ascii_dtostr (_tmp1_, G_ASCII_DTOSTR_BUF_SIZE, self);
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp3_ = g_strdup (_tmp2_);
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp4_ = _tmp3_;
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp1_ = (g_free (_tmp1_), NULL);
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	result = _tmp4_;
#line 781 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	return result;
#line 812 "tabby.c"
}


static void tabby_base_storage_real_import_session (TabbyBaseStorage* self, KatzeArray* tabs) {
	TabbyBaseSession* _tmp0_ = NULL;
	TabbyBaseSession* session;
	KatzeArray* _tmp1_;
	GList* _tmp2_ = NULL;
	GList* items;
	gdouble i;
	GList* _tmp3_;
#line 84 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (tabs != NULL);
#line 85 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_base_storage_get_new_session (self);
#line 85 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	session = _tmp0_;
#line 86 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = tabs;
#line 86 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = katze_array_get_items (_tmp1_);
#line 86 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	items = _tmp2_;
#line 87 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	i = (gdouble) 0;
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = items;
#line 840 "tabby.c"
	{
		GList* item_collection = NULL;
		GList* item_it = NULL;
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		item_collection = _tmp3_;
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		for (item_it = item_collection; item_it != NULL; item_it = item_it->next) {
#line 848 "tabby.c"
			KatzeItem* _tmp4_;
			KatzeItem* item = NULL;
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp4_ = _g_object_ref0 ((KatzeItem*) item_it->data);
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			item = _tmp4_;
#line 855 "tabby.c"
			{
				KatzeItem* _tmp5_;
				gdouble _tmp6_;
				gchar* _tmp7_ = NULL;
				gchar* _tmp8_;
				KatzeItem* _tmp9_;
				gdouble _tmp10_;
				TabbyBaseSession* _tmp11_;
				KatzeItem* _tmp12_;
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp5_ = item;
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp6_ = i;
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp7_ = double_to_string (_tmp6_);
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp8_ = _tmp7_;
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				katze_item_set_meta_string (_tmp5_, "sorting", _tmp8_);
#line 89 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (_tmp8_);
#line 91 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp9_ = item;
#line 91 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				katze_item_set_meta_string (_tmp9_, "history-step", "ignore");
#line 92 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp10_ = i;
#line 92 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				i = _tmp10_ + 1024;
#line 93 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp11_ = session;
#line 93 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp12_ = item;
#line 93 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				tabby_base_session_add_item (_tmp11_, _tmp12_);
#line 88 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 893 "tabby.c"
			}
		}
	}
#line 84 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_list_free0 (items);
#line 84 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (session);
#line 901 "tabby.c"
}


void tabby_base_storage_import_session (TabbyBaseStorage* self, KatzeArray* tabs) {
#line 84 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 84 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_GET_CLASS (self)->import_session (self, tabs);
#line 910 "tabby.c"
}


TabbyBaseStorage* tabby_base_storage_construct (GType object_type) {
	TabbyBaseStorage * self = NULL;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyBaseStorage*) g_object_new (object_type, NULL);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 920 "tabby.c"
}


MidoriApp* tabby_base_storage_get_app (TabbyBaseStorage* self) {
	MidoriApp* result;
	MidoriApp* _tmp0_;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_app;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp0_;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 935 "tabby.c"
}


static void tabby_base_storage_set_app (TabbyBaseStorage* self, MidoriApp* value) {
	MidoriApp* _tmp0_;
	MidoriApp* _tmp1_;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = value;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->_app);
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_app = _tmp1_;
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_notify ((GObject *) self, "app");
#line 954 "tabby.c"
}


static void tabby_base_storage_class_init (TabbyBaseStorageClass * klass) {
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_storage_parent_class = g_type_class_peek_parent (klass);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_type_class_add_private (klass, sizeof (TabbyBaseStoragePrivate));
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->get_saved_sessions = tabby_base_storage_real_get_saved_sessions;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->get_new_session = tabby_base_storage_real_get_new_session;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->import_session = tabby_base_storage_real_import_session;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_base_storage_get_property;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_base_storage_set_property;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_base_storage_finalize;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_BASE_STORAGE_APP, g_param_spec_object ("app", "app", "app", MIDORI_TYPE_APP, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 977 "tabby.c"
}


static void tabby_base_storage_tabby_istorage_interface_init (TabbyIStorageIface * iface) {
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_storage_tabby_istorage_parent_iface = g_type_interface_peek_parent (iface);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->get_saved_sessions = (KatzeArray* (*)(TabbyIStorage*)) tabby_base_storage_get_saved_sessions;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->get_new_session = (TabbyBaseSession* (*)(TabbyIStorage*)) tabby_base_storage_get_new_session;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->restore_last_sessions = (void (*)(TabbyIStorage*)) tabby_base_storage_real_restore_last_sessions;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->import_session = (void (*)(TabbyIStorage*, KatzeArray*)) tabby_base_storage_import_session;
#line 992 "tabby.c"
}


static void tabby_base_storage_instance_init (TabbyBaseStorage * self) {
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv = TABBY_BASE_STORAGE_GET_PRIVATE (self);
#line 999 "tabby.c"
}


static void tabby_base_storage_finalize (GObject* obj) {
	TabbyBaseStorage * self;
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_BASE_TYPE_STORAGE, TabbyBaseStorage);
#line 49 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->_app);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (tabby_base_storage_parent_class)->finalize (obj);
#line 1011 "tabby.c"
}


GType tabby_base_storage_get_type (void) {
	static volatile gsize tabby_base_storage_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_base_storage_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyBaseStorageClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_base_storage_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyBaseStorage), 0, (GInstanceInitFunc) tabby_base_storage_instance_init, NULL };
		static const GInterfaceInfo tabby_istorage_info = { (GInterfaceInitFunc) tabby_base_storage_tabby_istorage_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType tabby_base_storage_type_id;
		tabby_base_storage_type_id = g_type_register_static (G_TYPE_OBJECT, "TabbyBaseStorage", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_type_add_interface_static (tabby_base_storage_type_id, TABBY_TYPE_ISTORAGE, &tabby_istorage_info);
		g_once_init_leave (&tabby_base_storage_type_id__volatile, tabby_base_storage_type_id);
	}
	return tabby_base_storage_type_id__volatile;
}


static void _vala_tabby_base_storage_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	TabbyBaseStorage * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_BASE_TYPE_STORAGE, TabbyBaseStorage);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_STORAGE_APP:
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_value_set_object (value, tabby_base_storage_get_app (self));
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 1040 "tabby.c"
		default:
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 1046 "tabby.c"
	}
}


static void _vala_tabby_base_storage_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	TabbyBaseStorage * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_BASE_TYPE_STORAGE, TabbyBaseStorage);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_STORAGE_APP:
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_storage_set_app (self, g_value_get_object (value));
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 1062 "tabby.c"
		default:
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 48 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 1068 "tabby.c"
	}
}


static void _g_free0_ (gpointer var) {
#line 99 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	(var == NULL) ? NULL : (var = (g_free (var), NULL));
#line 1076 "tabby.c"
}


static void _g_slist_free__g_free0_ (GSList* self) {
#line 99 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_slist_foreach (self, (GFunc) _g_free0_, NULL);
#line 99 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_slist_free (self);
#line 1085 "tabby.c"
}


static void tabby_base_session_real_add_item (TabbyBaseSession* self, KatzeItem* item) {
#line 104 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_add_item'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 104 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1094 "tabby.c"
}


void tabby_base_session_add_item (TabbyBaseSession* self, KatzeItem* item) {
#line 104 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 104 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->add_item (self, item);
#line 1103 "tabby.c"
}


static void tabby_base_session_real_uri_changed (TabbyBaseSession* self, MidoriView* view, const gchar* uri) {
#line 105 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_uri_changed'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 105 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1112 "tabby.c"
}


void tabby_base_session_uri_changed (TabbyBaseSession* self, MidoriView* view, const gchar* uri) {
#line 105 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 105 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->uri_changed (self, view, uri);
#line 1121 "tabby.c"
}


static void tabby_base_session_real_data_changed (TabbyBaseSession* self, MidoriView* view) {
#line 106 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_data_changed'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 106 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1130 "tabby.c"
}


void tabby_base_session_data_changed (TabbyBaseSession* self, MidoriView* view) {
#line 106 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 106 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->data_changed (self, view);
#line 1139 "tabby.c"
}


static void tabby_base_session_real_tab_added (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view) {
#line 107 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_tab_added'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 107 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1148 "tabby.c"
}


void tabby_base_session_tab_added (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view) {
#line 107 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 107 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->tab_added (self, browser, view);
#line 1157 "tabby.c"
}


static void tabby_base_session_real_tab_removed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view) {
#line 108 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_tab_removed'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 108 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1166 "tabby.c"
}


void tabby_base_session_tab_removed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view) {
#line 108 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 108 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->tab_removed (self, browser, view);
#line 1175 "tabby.c"
}


static void tabby_base_session_real_tab_switched (TabbyBaseSession* self, MidoriView* old_view, MidoriView* new_view) {
#line 109 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_tab_switched'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 109 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1184 "tabby.c"
}


void tabby_base_session_tab_switched (TabbyBaseSession* self, MidoriView* old_view, MidoriView* new_view) {
#line 109 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 109 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->tab_switched (self, old_view, new_view);
#line 1193 "tabby.c"
}


static void tabby_base_session_real_tab_reordered (TabbyBaseSession* self, GtkWidget* tab, guint pos) {
#line 110 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_tab_reordered'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 110 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1202 "tabby.c"
}


void tabby_base_session_tab_reordered (TabbyBaseSession* self, GtkWidget* tab, guint pos) {
#line 110 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 110 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->tab_reordered (self, tab, pos);
#line 1211 "tabby.c"
}


static void tabby_base_session_real_remove (TabbyBaseSession* self) {
#line 112 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_remove'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 112 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return;
#line 1220 "tabby.c"
}


void tabby_base_session_remove (TabbyBaseSession* self) {
#line 112 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 112 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->remove (self);
#line 1229 "tabby.c"
}


static KatzeArray* tabby_base_session_real_get_tabs (TabbyBaseSession* self) {
#line 114 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_get_tabs'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 114 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return NULL;
#line 1238 "tabby.c"
}


KatzeArray* tabby_base_session_get_tabs (TabbyBaseSession* self) {
#line 114 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 114 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_BASE_SESSION_GET_CLASS (self)->get_tabs (self);
#line 1247 "tabby.c"
}


static gdouble tabby_base_session_real_get_max_sorting (TabbyBaseSession* self) {
#line 115 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_critical ("Type `%s' does not implement abstract method `tabby_base_session_get_max_sorting'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 115 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return 0.0;
#line 1256 "tabby.c"
}


gdouble tabby_base_session_get_max_sorting (TabbyBaseSession* self) {
#line 115 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, 0.0);
#line 115 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return TABBY_BASE_SESSION_GET_CLASS (self)->get_max_sorting (self);
#line 1265 "tabby.c"
}


static void _tabby_base_session_tab_added_midori_browser_add_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self) {
#line 120 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_tab_added (self, _sender, tab);
#line 1272 "tabby.c"
}


static void _tabby_base_session_helper_data_changed_midori_browser_add_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self) {
#line 121 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_helper_data_changed (self, _sender, tab);
#line 1279 "tabby.c"
}


static void _tabby_base_session_tab_removed_midori_browser_remove_tab (MidoriBrowser* _sender, MidoriView* tab, gpointer self) {
#line 123 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_tab_removed (self, _sender, tab);
#line 1286 "tabby.c"
}


static void _tabby_base_session_tab_switched_midori_browser_switch_tab (MidoriBrowser* _sender, MidoriView* old_view, MidoriView* new_view, gpointer self) {
#line 124 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_tab_switched (self, old_view, new_view);
#line 1293 "tabby.c"
}


static gboolean _tabby_base_session_delete_event_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = tabby_base_session_delete_event (self, _sender, event);
#line 125 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 1302 "tabby.c"
}


static void _tabby_base_session_tab_reordered_gtk_notebook_page_reordered (GtkNotebook* _sender, GtkWidget* child, guint page_num, gpointer self) {
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_tab_reordered (self, child, page_num);
#line 1309 "tabby.c"
}


static void tabby_base_session_real_attach (TabbyISession* base, MidoriBrowser* browser) {
	TabbyBaseSession * self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* _tmp3_;
	MidoriBrowser* _tmp4_;
	MidoriBrowser* _tmp5_;
	MidoriBrowser* _tmp6_;
	GtkNotebook* _tmp7_ = NULL;
	GtkNotebook* _tmp8_;
	GtkNotebook* _tmp9_;
	MidoriBrowser* _tmp10_;
	GList* _tmp11_ = NULL;
#line 117 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyBaseSession*) base;
#line 117 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 118 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = browser;
#line 118 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_set_browser (self, _tmp0_);
#line 120 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = browser;
#line 120 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp1_, "add-tab", (GCallback) _tabby_base_session_tab_added_midori_browser_add_tab, self, G_CONNECT_AFTER);
#line 121 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = browser;
#line 121 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp2_, "add-tab", (GCallback) _tabby_base_session_helper_data_changed_midori_browser_add_tab, self, 0);
#line 123 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = browser;
#line 123 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp3_, "remove-tab", (GCallback) _tabby_base_session_tab_removed_midori_browser_remove_tab, self, 0);
#line 124 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = browser;
#line 124 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp4_, "switch-tab", (GCallback) _tabby_base_session_tab_switched_midori_browser_switch_tab, self, 0);
#line 125 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = browser;
#line 125 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object ((GtkWidget*) _tmp5_, "delete-event", (GCallback) _tabby_base_session_delete_event_gtk_widget_delete_event, self, G_CONNECT_AFTER);
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = browser;
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp6_, "notebook", &_tmp7_, NULL);
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = _tmp7_;
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = _tmp8_;
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp9_, "page-reordered", (GCallback) _tabby_base_session_tab_reordered_gtk_notebook_page_reordered, self, G_CONNECT_AFTER);
#line 126 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp9_);
#line 128 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_set_state (self, TABBY_SESSION_STATE_OPEN);
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp10_ = browser;
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp11_ = midori_browser_get_tabs (_tmp10_);
#line 1373 "tabby.c"
	{
		GList* view_collection = NULL;
		GList* view_it = NULL;
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		view_collection = _tmp11_;
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		for (view_it = view_collection; view_it != NULL; view_it = view_it->next) {
#line 1381 "tabby.c"
			MidoriView* _tmp12_;
			MidoriView* view = NULL;
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp12_ = _g_object_ref0 ((MidoriView*) view_it->data);
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			view = _tmp12_;
#line 1388 "tabby.c"
			{
				MidoriBrowser* _tmp13_;
				MidoriView* _tmp14_;
				MidoriBrowser* _tmp15_;
				MidoriView* _tmp16_;
#line 131 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp13_ = browser;
#line 131 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp14_ = view;
#line 131 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				tabby_base_session_tab_added (self, _tmp13_, _tmp14_);
#line 132 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp15_ = browser;
#line 132 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp16_ = view;
#line 132 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				tabby_base_session_helper_data_changed (self, _tmp15_, _tmp16_);
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (view);
#line 1408 "tabby.c"
			}
		}
#line 130 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_list_free0 (view_collection);
#line 1413 "tabby.c"
	}
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return _data1_;
#line 1423 "tabby.c"
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 1432 "tabby.c"
		TabbyBaseSession * self;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		self = _data1_->self;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_list_free0 (_data1_->items);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_data1_->browser);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (self);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_slice_free (Block1Data, _data1_);
#line 1444 "tabby.c"
	}
}


static gboolean __lambda4_ (Block1Data* _data1_) {
	TabbyBaseSession * self;
	gboolean result = FALSE;
	GPtrArray* _tmp0_;
	GPtrArray* new_tabs;
	GList* _tmp1_;
	guint _tmp2_ = 0U;
	GList* _tmp27_;
#line 187 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = _data1_->self;
#line 189 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = g_ptr_array_new ();
#line 189 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	new_tabs = _tmp0_;
#line 190 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _data1_->items;
#line 190 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = g_list_length (_tmp1_);
#line 190 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp2_ > ((guint) 0)) {
#line 1469 "tabby.c"
		GPtrArray* _tmp26_;
		{
			gint i;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			i = 0;
#line 1475 "tabby.c"
			{
				gboolean _tmp3_;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp3_ = TRUE;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				while (TRUE) {
#line 1482 "tabby.c"
					gboolean _tmp4_;
					gint _tmp6_;
					gint _tmp7_;
					GList* _tmp8_;
					GList* _tmp10_;
					gconstpointer _tmp11_;
					KatzeItem* _tmp12_;
					KatzeItem* t_item;
					KatzeItem* _tmp13_;
					gboolean _tmp14_ = FALSE;
					gboolean _tmp15_;
					gboolean _tmp17_;
					MidoriBrowser* _tmp19_;
					KatzeItem* _tmp20_;
					GtkWidget* _tmp21_ = NULL;
					GtkWidget* tab;
					GPtrArray* _tmp22_;
					GtkWidget* _tmp23_;
					GList* _tmp24_;
					GList* _tmp25_;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp4_ = _tmp3_;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (!_tmp4_) {
#line 1507 "tabby.c"
						gint _tmp5_;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp5_ = i;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						i = _tmp5_ + 1;
#line 1513 "tabby.c"
					}
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp3_ = FALSE;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp6_ = i;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp7_ = tabby_IDLE_RESTORE_COUNT;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (!(_tmp6_ < _tmp7_)) {
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						break;
#line 1525 "tabby.c"
					}
#line 192 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp8_ = _data1_->u_items;
#line 192 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp8_ == NULL) {
#line 1531 "tabby.c"
						GPtrArray* _tmp9_;
#line 193 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp9_ = new_tabs;
#line 193 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						tabby_base_session_helper_reorder_tabs (self, _tmp9_);
#line 194 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						tabby_base_session_set_state (self, TABBY_SESSION_STATE_OPEN);
#line 195 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						result = FALSE;
#line 195 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_g_ptr_array_free0 (new_tabs);
#line 195 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						return result;
#line 1545 "tabby.c"
					}
#line 198 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp10_ = _data1_->u_items;
#line 198 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp11_ = _tmp10_->data;
#line 198 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp12_ = _g_object_ref0 ((KatzeItem*) _tmp11_);
#line 198 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					t_item = _tmp12_;
#line 200 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp13_ = t_item;
#line 200 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					katze_item_set_meta_integer (_tmp13_, "append", (gint64) 1);
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp15_ = _data1_->delay;
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp15_) {
#line 1563 "tabby.c"
						gboolean _tmp16_;
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp16_ = _data1_->should_delay;
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp14_ = _tmp16_;
#line 1569 "tabby.c"
					} else {
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp14_ = FALSE;
#line 1573 "tabby.c"
					}
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp17_ = _tmp14_;
#line 202 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp17_) {
#line 1579 "tabby.c"
						KatzeItem* _tmp18_;
#line 203 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp18_ = t_item;
#line 203 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						katze_item_set_meta_integer (_tmp18_, "delay", (gint64) MIDORI_DELAY_DELAYED);
#line 1585 "tabby.c"
					} else {
#line 205 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_data1_->delay = TRUE;
#line 1589 "tabby.c"
					}
#line 207 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp19_ = _data1_->browser;
#line 207 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp20_ = t_item;
#line 207 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp21_ = midori_browser_add_item (_tmp19_, _tmp20_);
#line 207 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					tab = _tmp21_;
#line 208 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp22_ = new_tabs;
#line 208 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp23_ = tab;
#line 208 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					g_ptr_array_add (_tmp22_, _tmp23_);
#line 210 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp24_ = _data1_->u_items;
#line 210 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp25_ = _tmp24_->next;
#line 210 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_data1_->u_items = _tmp25_;
#line 191 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_g_object_unref0 (t_item);
#line 1613 "tabby.c"
				}
			}
		}
#line 212 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp26_ = new_tabs;
#line 212 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_helper_reorder_tabs (self, _tmp26_);
#line 1621 "tabby.c"
	}
#line 214 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp27_ = _data1_->u_items;
#line 214 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp27_ == NULL) {
#line 215 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_set_state (self, TABBY_SESSION_STATE_OPEN);
#line 216 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		result = FALSE;
#line 216 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_ptr_array_free0 (new_tabs);
#line 216 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return result;
#line 1635 "tabby.c"
	}
#line 218 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = TRUE;
#line 218 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_ptr_array_free0 (new_tabs);
#line 218 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 1643 "tabby.c"
}


static gboolean ___lambda4__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda4_ (self);
#line 187 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 1652 "tabby.c"
}


static void tabby_base_session_real_restore (TabbyISession* base, MidoriBrowser* browser) {
	TabbyBaseSession * self;
	Block1Data* _data1_;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	KatzeArray* _tmp3_ = NULL;
	KatzeArray* tabs;
	MidoriBrowser* _tmp4_;
	gconstpointer _tmp5_ = NULL;
	KatzeArray* open_uris;
	gboolean _tmp6_ = FALSE;
	KatzeArray* _tmp7_;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp10_;
	MidoriBrowser* _tmp21_;
	MidoriBrowser* _tmp22_;
	MidoriBrowser* _tmp23_;
	MidoriBrowser* _tmp24_;
	MidoriBrowser* _tmp25_;
	MidoriBrowser* _tmp26_;
	GtkNotebook* _tmp27_ = NULL;
	GtkNotebook* _tmp28_;
	GtkNotebook* _tmp29_;
	KatzeArray* _tmp30_;
	KatzeArray* _tmp33_;
	GList* _tmp34_ = NULL;
	GList* _tmp35_;
	gint load_on_startup = 0;
	MidoriApp* _tmp36_;
	MidoriWebSettings* _tmp37_ = NULL;
	MidoriWebSettings* _tmp38_;
	MidoriWebSettings* _tmp39_;
	gint _tmp40_;
	MidoriApp* _tmp41_;
	gboolean _tmp42_;
	gboolean _tmp43_;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyBaseSession*) base;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->_ref_count_ = 1;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->self = g_object_ref (self);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = browser;
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_data1_->browser);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->browser = _tmp1_;
#line 137 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _data1_->browser;
#line 137 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_set_browser (self, _tmp2_);
#line 139 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = tabby_base_session_get_tabs (self);
#line 139 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabs = _tmp3_;
#line 140 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = _data1_->browser;
#line 140 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = g_object_get_data ((GObject*) _tmp4_, "tabby-open-uris");
#line 140 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	open_uris = (KatzeArray*) _tmp5_;
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = tabs;
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = katze_array_is_empty (_tmp7_);
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp8_) {
#line 1731 "tabby.c"
		KatzeArray* _tmp9_;
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = open_uris;
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = _tmp9_ == NULL;
#line 1737 "tabby.c"
	} else {
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = FALSE;
#line 1741 "tabby.c"
	}
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp10_ = _tmp6_;
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp10_) {
#line 1747 "tabby.c"
		gint load_on_startup = 0;
		MidoriApp* _tmp11_;
		MidoriWebSettings* _tmp12_ = NULL;
		MidoriWebSettings* _tmp13_;
		MidoriWebSettings* _tmp14_;
		KatzeItem* _tmp15_;
		KatzeItem* item;
		gint _tmp16_;
		KatzeArray* _tmp19_;
		KatzeItem* _tmp20_;
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = tabby_APP;
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_get (_tmp11_, "settings", &_tmp12_, NULL);
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _tmp12_;
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _tmp13_;
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_get ((GObject*) _tmp14_, "load-on-startup", &load_on_startup, NULL);
#line 145 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp14_);
#line 147 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = katze_item_new ();
#line 147 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		item = _tmp15_;
#line 149 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = load_on_startup;
#line 149 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp16_ == ((gint) MIDORI_STARTUP_BLANK_PAGE)) {
#line 1778 "tabby.c"
			KatzeItem* _tmp17_;
#line 150 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp17_ = item;
#line 150 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_uri (_tmp17_, "about:dial");
#line 1784 "tabby.c"
		} else {
			KatzeItem* _tmp18_;
#line 152 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp18_ = item;
#line 152 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_uri (_tmp18_, "about:home");
#line 1791 "tabby.c"
		}
#line 155 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp19_ = tabs;
#line 155 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp20_ = item;
#line 155 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_emit_by_name (_tmp19_, "add-item", (GObject*) _tmp20_);
#line 142 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (item);
#line 1801 "tabby.c"
	}
#line 158 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp21_ = _data1_->browser;
#line 158 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp21_, "add-tab", (GCallback) _tabby_base_session_tab_added_midori_browser_add_tab, self, G_CONNECT_AFTER);
#line 159 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp22_ = _data1_->browser;
#line 159 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp22_, "add-tab", (GCallback) _tabby_base_session_helper_data_changed_midori_browser_add_tab, self, 0);
#line 161 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp23_ = _data1_->browser;
#line 161 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp23_, "remove-tab", (GCallback) _tabby_base_session_tab_removed_midori_browser_remove_tab, self, 0);
#line 162 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp24_ = _data1_->browser;
#line 162 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp24_, "switch-tab", (GCallback) _tabby_base_session_tab_switched_midori_browser_switch_tab, self, 0);
#line 163 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp25_ = _data1_->browser;
#line 163 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object ((GtkWidget*) _tmp25_, "delete-event", (GCallback) _tabby_base_session_delete_event_gtk_widget_delete_event, self, G_CONNECT_AFTER);
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp26_ = _data1_->browser;
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp26_, "notebook", &_tmp27_, NULL);
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp28_ = _tmp27_;
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp29_ = _tmp28_;
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp29_, "page-reordered", (GCallback) _tabby_base_session_tab_reordered_gtk_notebook_page_reordered, self, G_CONNECT_AFTER);
#line 164 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp29_);
#line 166 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->items = NULL;
#line 167 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp30_ = open_uris;
#line 167 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp30_ != NULL) {
#line 1841 "tabby.c"
		KatzeArray* _tmp31_;
		GList* _tmp32_ = NULL;
#line 168 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp31_ = open_uris;
#line 168 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp32_ = katze_array_get_items (_tmp31_);
#line 168 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_data1_->items = g_list_concat (_data1_->items, _tmp32_);
#line 1850 "tabby.c"
	}
#line 170 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp33_ = tabs;
#line 170 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp34_ = katze_array_get_items (_tmp33_);
#line 170 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->items = g_list_concat (_data1_->items, _tmp34_);
#line 171 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp35_ = _data1_->items;
#line 171 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->u_items = _tmp35_;
#line 173 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->delay = FALSE;
#line 174 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->should_delay = FALSE;
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp36_ = tabby_APP;
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp36_, "settings", &_tmp37_, NULL);
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp38_ = _tmp37_;
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp39_ = _tmp38_;
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get ((GObject*) _tmp39_, "load-on-startup", &load_on_startup, NULL);
#line 177 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp39_);
#line 178 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp40_ = load_on_startup;
#line 178 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_->should_delay = _tmp40_ == ((gint) MIDORI_STARTUP_DELAYED_PAGES);
#line 180 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp41_ = tabby_APP;
#line 180 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp42_ = midori_app_get_crashed (_tmp41_);
#line 180 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp43_ = _tmp42_;
#line 180 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp43_ == TRUE) {
#line 181 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_data1_->delay = TRUE;
#line 182 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_data1_->should_delay = TRUE;
#line 1894 "tabby.c"
	}
#line 185 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_set_state (self, TABBY_SESSION_STATE_RESTORING);
#line 187 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda4__gsource_func, block1_data_ref (_data1_), block1_data_unref);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (tabs);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	block1_data_unref (_data1_);
#line 136 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data1_ = NULL;
#line 1906 "tabby.c"
}


static void tabby_base_session_real_close (TabbyBaseSession* self) {
	TabbySessionState _tmp0_;
#line 223 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_state;
#line 223 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp0_ == TABBY_SESSION_STATE_CLOSED) {
#line 1916 "tabby.c"
		MidoriBrowser* _tmp1_;
#line 224 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp1_ = self->priv->_browser;
#line 224 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_vala_assert (_tmp1_ == NULL, "this.browser == null");
#line 1922 "tabby.c"
	} else {
		MidoriBrowser* _tmp2_;
		guint _tmp3_ = 0U;
		MidoriBrowser* _tmp4_;
		guint _tmp5_ = 0U;
		MidoriBrowser* _tmp6_;
		guint _tmp7_ = 0U;
		MidoriBrowser* _tmp8_;
		guint _tmp9_ = 0U;
		MidoriBrowser* _tmp10_;
		guint _tmp11_ = 0U;
		MidoriBrowser* _tmp12_;
		GtkNotebook* _tmp13_ = NULL;
		GtkNotebook* _tmp14_;
		GtkNotebook* _tmp15_;
		guint _tmp16_ = 0U;
#line 226 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_set_state (self, TABBY_SESSION_STATE_CLOSED);
#line 228 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = self->priv->_browser;
#line 228 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("add-tab", MIDORI_TYPE_BROWSER, &_tmp3_, NULL, FALSE);
#line 228 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _tabby_base_session_tab_added_midori_browser_add_tab, self);
#line 229 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = self->priv->_browser;
#line 229 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("add-tab", MIDORI_TYPE_BROWSER, &_tmp5_, NULL, FALSE);
#line 229 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched (_tmp4_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _tabby_base_session_helper_data_changed_midori_browser_add_tab, self);
#line 230 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = self->priv->_browser;
#line 230 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("remove-tab", MIDORI_TYPE_BROWSER, &_tmp7_, NULL, FALSE);
#line 230 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched (_tmp6_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp7_, 0, NULL, (GCallback) _tabby_base_session_tab_removed_midori_browser_remove_tab, self);
#line 231 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = self->priv->_browser;
#line 231 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("switch-tab", MIDORI_TYPE_BROWSER, &_tmp9_, NULL, FALSE);
#line 231 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched (_tmp8_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp9_, 0, NULL, (GCallback) _tabby_base_session_tab_switched_midori_browser_switch_tab, self);
#line 232 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = self->priv->_browser;
#line 232 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("delete-event", GTK_TYPE_WIDGET, &_tmp11_, NULL, FALSE);
#line 232 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched ((GtkWidget*) _tmp10_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp11_, 0, NULL, (GCallback) _tabby_base_session_delete_event_gtk_widget_delete_event, self);
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = self->priv->_browser;
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_get (_tmp12_, "notebook", &_tmp13_, NULL);
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _tmp13_;
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _tmp14_;
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("page-reordered", GTK_TYPE_NOTEBOOK, &_tmp16_, NULL, FALSE);
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched (_tmp15_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp16_, 0, NULL, (GCallback) _tabby_base_session_tab_reordered_gtk_notebook_page_reordered, self);
#line 233 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp15_);
#line 235 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_set_browser (self, NULL);
#line 1987 "tabby.c"
	}
}


void tabby_base_session_close (TabbyBaseSession* self) {
#line 222 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 222 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_GET_CLASS (self)->close (self);
#line 1997 "tabby.c"
}


gboolean tabby_base_session_delete_event (TabbyBaseSession* self, GtkWidget* widget, GdkEventAny* event) {
	gboolean result = FALSE;
#line 240 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 240 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 240 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 245 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_close (self);
#line 246 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = FALSE;
#line 246 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2015 "tabby.c"
}


static gdouble double_parse (const gchar* str) {
	gdouble result = 0.0;
	const gchar* _tmp0_;
	gdouble _tmp1_ = 0.0;
#line 787 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	g_return_val_if_fail (str != NULL, 0.0);
#line 788 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp0_ = str;
#line 788 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp1_ = g_ascii_strtod (_tmp0_, NULL);
#line 788 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	result = _tmp1_;
#line 788 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	return result;
#line 2033 "tabby.c"
}


gdouble tabby_base_session_get_tab_sorting (TabbyBaseSession* self, MidoriView* view) {
	gdouble result = 0.0;
	MidoriBrowser* _tmp0_;
	GtkNotebook* _tmp1_ = NULL;
	GtkNotebook* _tmp2_;
	GtkNotebook* _tmp3_;
	MidoriView* _tmp4_;
	gint _tmp5_ = 0;
	gint _tmp6_;
	gint this_pos;
	MidoriBrowser* _tmp7_;
	GtkNotebook* _tmp8_ = NULL;
	GtkNotebook* _tmp9_;
	GtkNotebook* _tmp10_;
	gint _tmp11_;
	GtkWidget* _tmp12_ = NULL;
	MidoriView* _tmp13_;
	MidoriView* _tmp14_;
	MidoriView* prev_view;
	MidoriBrowser* _tmp15_;
	GtkNotebook* _tmp16_ = NULL;
	GtkNotebook* _tmp17_;
	GtkNotebook* _tmp18_;
	gint _tmp19_;
	GtkWidget* _tmp20_ = NULL;
	MidoriView* _tmp21_;
	MidoriView* _tmp22_;
	MidoriView* next_view;
	gchar* prev_meta_sorting;
	gchar* next_meta_sorting;
	gdouble prev_sorting = 0.0;
	gdouble next_sorting = 0.0;
	gdouble this_sorting = 0.0;
	MidoriView* _tmp23_;
	const gchar* _tmp29_;
	MidoriView* _tmp35_;
	const gchar* _tmp41_;
	gdouble _tmp45_;
	gdouble _tmp46_;
	gdouble _tmp47_;
#line 250 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, 0.0);
#line 250 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (view != NULL, 0.0);
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_browser;
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp0_, "notebook", &_tmp1_, NULL);
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _tmp1_;
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = _tmp2_;
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = view;
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = gtk_notebook_page_num (_tmp3_, (GtkWidget*) _tmp4_);
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = _tmp5_;
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp3_);
#line 251 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	this_pos = _tmp6_;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = self->priv->_browser;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp7_, "notebook", &_tmp8_, NULL);
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = _tmp8_;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp10_ = _tmp9_;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp11_ = this_pos;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp12_ = gtk_notebook_get_nth_page (_tmp10_, _tmp11_ - 1);
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp13_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp12_, MIDORI_TYPE_VIEW) ? ((MidoriView*) _tmp12_) : NULL);
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp14_ = _tmp13_;
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp10_);
#line 252 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	prev_view = _tmp14_;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp15_ = self->priv->_browser;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp15_, "notebook", &_tmp16_, NULL);
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp17_ = _tmp16_;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp18_ = _tmp17_;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp19_ = this_pos;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp20_ = gtk_notebook_get_nth_page (_tmp18_, _tmp19_ + 1);
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp21_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp20_, MIDORI_TYPE_VIEW) ? ((MidoriView*) _tmp20_) : NULL);
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp22_ = _tmp21_;
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp18_);
#line 253 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	next_view = _tmp22_;
#line 255 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	prev_meta_sorting = NULL;
#line 256 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	next_meta_sorting = NULL;
#line 259 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp23_ = prev_view;
#line 259 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp23_ != NULL) {
#line 2147 "tabby.c"
		MidoriView* _tmp24_;
		KatzeItem* _tmp25_ = NULL;
		KatzeItem* prev_item;
		KatzeItem* _tmp26_;
		const gchar* _tmp27_ = NULL;
		gchar* _tmp28_;
#line 260 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp24_ = prev_view;
#line 260 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp25_ = midori_view_get_proxy_item (_tmp24_);
#line 260 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		prev_item = _tmp25_;
#line 261 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp26_ = prev_item;
#line 261 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp27_ = katze_item_get_meta_string (_tmp26_, "sorting");
#line 261 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp28_ = g_strdup (_tmp27_);
#line 261 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (prev_meta_sorting);
#line 261 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		prev_meta_sorting = _tmp28_;
#line 2170 "tabby.c"
	}
#line 264 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp29_ = prev_meta_sorting;
#line 264 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp29_ == NULL) {
#line 2176 "tabby.c"
		TabbySessionState _tmp30_;
#line 265 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp30_ = self->priv->_state;
#line 265 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp30_ == TABBY_SESSION_STATE_RESTORING) {
#line 2182 "tabby.c"
			gdouble _tmp31_ = 0.0;
#line 266 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp31_ = tabby_base_session_get_max_sorting (self);
#line 266 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			prev_sorting = _tmp31_;
#line 2188 "tabby.c"
		} else {
			gdouble _tmp32_ = 0.0;
#line 268 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp32_ = double_parse ("0");
#line 268 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			prev_sorting = _tmp32_;
#line 2195 "tabby.c"
		}
	} else {
		const gchar* _tmp33_;
		gdouble _tmp34_ = 0.0;
#line 270 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp33_ = prev_meta_sorting;
#line 270 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp34_ = double_parse (_tmp33_);
#line 270 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		prev_sorting = _tmp34_;
#line 2206 "tabby.c"
	}
#line 272 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp35_ = next_view;
#line 272 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp35_ != NULL) {
#line 2212 "tabby.c"
		MidoriView* _tmp36_;
		KatzeItem* _tmp37_ = NULL;
		KatzeItem* next_item;
		KatzeItem* _tmp38_;
		const gchar* _tmp39_ = NULL;
		gchar* _tmp40_;
#line 273 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp36_ = next_view;
#line 273 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp37_ = midori_view_get_proxy_item (_tmp36_);
#line 273 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		next_item = _tmp37_;
#line 274 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp38_ = next_item;
#line 274 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp39_ = katze_item_get_meta_string (_tmp38_, "sorting");
#line 274 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp40_ = g_strdup (_tmp39_);
#line 274 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (next_meta_sorting);
#line 274 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		next_meta_sorting = _tmp40_;
#line 2235 "tabby.c"
	}
#line 277 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp41_ = next_meta_sorting;
#line 277 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp41_ == NULL) {
#line 2241 "tabby.c"
		gdouble _tmp42_;
#line 278 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp42_ = prev_sorting;
#line 278 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		next_sorting = _tmp42_ + 2048;
#line 2247 "tabby.c"
	} else {
		const gchar* _tmp43_;
		gdouble _tmp44_ = 0.0;
#line 280 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp43_ = next_meta_sorting;
#line 280 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp44_ = double_parse (_tmp43_);
#line 280 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		next_sorting = _tmp44_;
#line 2257 "tabby.c"
	}
#line 282 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp45_ = prev_sorting;
#line 282 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp46_ = next_sorting;
#line 282 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp47_ = prev_sorting;
#line 282 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	this_sorting = _tmp45_ + ((_tmp46_ - _tmp47_) / 2);
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = this_sorting;
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (next_meta_sorting);
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (prev_meta_sorting);
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (next_view);
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (prev_view);
#line 284 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2279 "tabby.c"
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return _data2_;
#line 2288 "tabby.c"
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 2297 "tabby.c"
		TabbyBaseSession * self;
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		self = _data2_->self;
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_data2_->view);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (self);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_slice_free (Block2Data, _data2_);
#line 2307 "tabby.c"
	}
}


static void ____lambda2_ (Block2Data* _data2_) {
	TabbyBaseSession * self;
	MidoriView* _tmp0_;
	MidoriView* _tmp1_;
	WebKitWebView* _tmp2_;
	WebKitWebView* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = _data2_->self;
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = _data2_->view;
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _data2_->view;
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = midori_tab_get_web_view ((MidoriTab*) _tmp1_);
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = _tmp2_;
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = webkit_web_view_get_uri (_tmp3_);
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = _tmp4_;
#line 296 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_uri_changed (self, _tmp0_, _tmp5_);
#line 2336 "tabby.c"
}


static void _____lambda2__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	____lambda2_ (self);
#line 2343 "tabby.c"
}


static void ____lambda3_ (Block2Data* _data2_) {
	TabbyBaseSession * self;
	MidoriView* _tmp0_;
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = _data2_->self;
#line 299 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = _data2_->view;
#line 299 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_data_changed (self, _tmp0_);
#line 2356 "tabby.c"
}


static void _____lambda3__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	____lambda3_ (self);
#line 2363 "tabby.c"
}


static void _tabby_base_session_load_status_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
#line 304 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_load_status (self, _sender, pspec);
#line 2370 "tabby.c"
}


static void tabby_base_session_load_status (TabbyBaseSession* self, GObject* _view, GParamSpec* pspec) {
	Block2Data* _data2_;
	GObject* _tmp0_;
	MidoriView* _tmp1_;
	MidoriView* _tmp2_;
	MidoriLoadStatus _tmp3_;
	MidoriLoadStatus _tmp4_;
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (_view != NULL);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (pspec != NULL);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data2_->_ref_count_ = 1;
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data2_->self = g_object_ref (self);
#line 288 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = _view;
#line 288 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, MIDORI_TYPE_VIEW, MidoriView));
#line 288 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data2_->view = _tmp1_;
#line 290 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _data2_->view;
#line 290 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = midori_tab_get_load_status ((MidoriTab*) _tmp2_);
#line 290 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = _tmp3_;
#line 290 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp4_ == MIDORI_LOAD_PROVISIONAL) {
#line 2407 "tabby.c"
		MidoriView* _tmp5_;
		KatzeItem* _tmp6_ = NULL;
		KatzeItem* item;
		KatzeItem* _tmp7_;
		gint64 _tmp8_ = 0LL;
		gint64 delay;
		gint64 _tmp9_;
		MidoriView* _tmp16_;
		guint _tmp17_ = 0U;
		GQuark _tmp18_ = 0U;
#line 291 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = _data2_->view;
#line 291 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = midori_view_get_proxy_item (_tmp5_);
#line 291 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		item = _tmp6_;
#line 293 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = item;
#line 293 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = katze_item_get_meta_integer (_tmp7_, "delay");
#line 293 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		delay = _tmp8_;
#line 294 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = delay;
#line 294 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp9_ == ((gint64) MIDORI_DELAY_UNDELAYED)) {
#line 2434 "tabby.c"
			MidoriView* _tmp10_;
			WebKitWebView* _tmp11_;
			WebKitWebView* _tmp12_;
			MidoriView* _tmp13_;
			WebKitWebView* _tmp14_;
			WebKitWebView* _tmp15_;
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp10_ = _data2_->view;
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp11_ = midori_tab_get_web_view ((MidoriTab*) _tmp10_);
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp12_ = _tmp11_;
#line 295 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_signal_connect_data ((GObject*) _tmp12_, "notify::uri", (GCallback) _____lambda2__g_object_notify, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = _data2_->view;
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp14_ = midori_tab_get_web_view ((MidoriTab*) _tmp13_);
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp15_ = _tmp14_;
#line 298 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_signal_connect_data ((GObject*) _tmp15_, "notify::title", (GCallback) _____lambda3__g_object_notify, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 2457 "tabby.c"
		}
#line 304 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = _data2_->view;
#line 304 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_parse_name ("notify::load-status", G_TYPE_OBJECT, &_tmp17_, &_tmp18_, TRUE);
#line 304 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_handlers_disconnect_matched ((GObject*) _tmp16_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp17_, _tmp18_, NULL, (GCallback) _tabby_base_session_load_status_g_object_notify, self);
#line 2465 "tabby.c"
	}
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	block2_data_unref (_data2_);
#line 287 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data2_ = NULL;
#line 2471 "tabby.c"
}


static void _tabby_base_session_helper_duplicate_tab_midori_view_new_view (MidoriView* _sender, MidoriView* new_view, MidoriNewView where, gboolean user_initiated, gpointer self) {
#line 311 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_helper_duplicate_tab (self, _sender, new_view, where, user_initiated);
#line 2478 "tabby.c"
}


static void tabby_base_session_helper_data_changed (TabbyBaseSession* self, MidoriBrowser* browser, MidoriView* view) {
	MidoriView* _tmp0_;
	MidoriView* _tmp1_;
#line 308 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 308 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 308 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 309 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 309 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object ((GObject*) _tmp0_, "notify::load-status", (GCallback) _tabby_base_session_load_status_g_object_notify, self, 0);
#line 311 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = view;
#line 311 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp1_, "new-view", (GCallback) _tabby_base_session_helper_duplicate_tab_midori_view_new_view, self, 0);
#line 2499 "tabby.c"
}


static gint __lambda5_ (TabbyBaseSession* self, gdouble* a, gdouble* b) {
	gint result = 0;
	gdouble* _tmp0_;
	gdouble* _tmp1_;
#line 316 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = a;
#line 316 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = b;
#line 316 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if ((*_tmp0_) > (*_tmp1_)) {
#line 317 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		result = 1;
#line 317 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return result;
#line 2517 "tabby.c"
	} else {
		gdouble* _tmp2_;
		gdouble* _tmp3_;
#line 318 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = a;
#line 318 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = b;
#line 318 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if ((*_tmp2_) < (*_tmp3_)) {
#line 319 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			result = -1;
#line 319 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			return result;
#line 2531 "tabby.c"
		}
	}
#line 320 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = 0;
#line 320 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2538 "tabby.c"
}


static gint ___lambda5__gcompare_data_func (gconstpointer a, gconstpointer b, gpointer self) {
	gint result;
	result = __lambda5_ (self, a, b);
#line 315 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2547 "tabby.c"
}


static gboolean _double_equal (const gdouble* s1, const gdouble* s2) {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (s1 == s2) {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return TRUE;
#line 2556 "tabby.c"
	}
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (s1 == NULL) {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return FALSE;
#line 2562 "tabby.c"
	}
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (s2 == NULL) {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return FALSE;
#line 2568 "tabby.c"
	}
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return (*s1) == (*s2);
#line 2572 "tabby.c"
}


static gint __lambda6_ (gdouble* a, gdouble* b) {
	gint result = 0;
	gint _tmp0_ = 0;
	gdouble* _tmp1_;
	gdouble* _tmp2_;
	gint _tmp3_;
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = a;
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = b;
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_double_equal (_tmp1_, _tmp2_) == TRUE) {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp0_ = 0;
#line 2590 "tabby.c"
	} else {
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp0_ = -1;
#line 2594 "tabby.c"
	}
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = _tmp0_;
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp3_;
#line 324 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2602 "tabby.c"
}


static gint ___lambda6__gcompare_func (gconstpointer a, gconstpointer b) {
	gint result;
	result = __lambda6_ (a, b);
#line 323 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 2611 "tabby.c"
}


static gboolean double_try_parse (const gchar* str, gdouble* _result_) {
	gdouble _vala_result = 0.0;
	gboolean result = FALSE;
	gchar* endptr = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_ = NULL;
	gdouble _tmp2_ = 0.0;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	gint _tmp6_;
	gint _tmp7_;
#line 790 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	g_return_val_if_fail (str != NULL, FALSE);
#line 792 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp0_ = str;
#line 792 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp2_ = g_ascii_strtod (_tmp0_, &_tmp1_);
#line 792 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	endptr = _tmp1_;
#line 792 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_vala_result = _tmp2_;
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp3_ = endptr;
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp4_ = str;
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp5_ = str;
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp6_ = strlen (_tmp5_);
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	_tmp7_ = _tmp6_;
#line 793 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	if (_tmp3_ == (((gchar*) _tmp4_) + _tmp7_)) {
#line 794 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		result = TRUE;
#line 794 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		if (_result_) {
#line 794 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
			*_result_ = _vala_result;
#line 2655 "tabby.c"
		}
#line 794 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		return result;
#line 2659 "tabby.c"
	} else {
#line 796 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		result = FALSE;
#line 796 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		if (_result_) {
#line 796 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
			*_result_ = _vala_result;
#line 2667 "tabby.c"
		}
#line 796 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		return result;
#line 2671 "tabby.c"
	}
#line 790 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
	if (_result_) {
#line 790 "/usr/share/vala-0.20/vapi/glib-2.0.vapi"
		*_result_ = _vala_result;
#line 2677 "tabby.c"
	}
}


static gdouble* _double_dup (gdouble* self) {
	gdouble* dup;
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	dup = g_new0 (gdouble, 1);
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	memcpy (dup, self, sizeof (gdouble));
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return dup;
#line 2690 "tabby.c"
}


static gpointer __double_dup0 (gpointer self) {
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self ? _double_dup (self) : NULL;
#line 2697 "tabby.c"
}


static void tabby_base_session_helper_reorder_tabs (TabbyBaseSession* self, GPtrArray* new_tabs) {
	GCompareDataFunc helper_compare_data;
	void* helper_compare_data_target;
	GDestroyNotify helper_compare_data_target_destroy_notify;
	GCompareFunc helper_compare_func;
	MidoriBrowser* _tmp0_;
	GtkNotebook* _tmp1_ = NULL;
	GtkNotebook* _tmp2_;
	GtkNotebook* _tmp3_;
	guint _tmp4_ = 0U;
	MidoriBrowser* _tmp40_;
	GtkNotebook* _tmp41_ = NULL;
	GtkNotebook* _tmp42_;
	GtkNotebook* _tmp43_;
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (new_tabs != NULL);
#line 315 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data = ___lambda5__gcompare_data_func;
#line 315 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data_target = g_object_ref (self);
#line 315 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data_target_destroy_notify = g_object_unref;
#line 323 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_func = ___lambda6__gcompare_func;
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_browser;
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp0_, "notebook", &_tmp1_, NULL);
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _tmp1_;
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = _tmp2_;
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_parse_name ("page-reordered", GTK_TYPE_NOTEBOOK, &_tmp4_, NULL, FALSE);
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_handlers_disconnect_matched (_tmp3_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp4_, 0, NULL, (GCallback) _tabby_base_session_tab_reordered_gtk_notebook_page_reordered, self);
#line 327 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp3_);
#line 2741 "tabby.c"
	{
		gint i;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		i = 0;
#line 2746 "tabby.c"
		{
			gboolean _tmp5_;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp5_ = TRUE;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			while (TRUE) {
#line 2753 "tabby.c"
				gboolean _tmp6_;
				gint _tmp8_;
				GPtrArray* _tmp9_;
				guint _tmp10_;
				GPtrArray* _tmp11_;
				gint _tmp12_;
				void* _tmp13_ = NULL;
				MidoriView* _tmp14_;
				MidoriView* tab;
				MidoriView* _tmp15_;
				KatzeItem* _tmp16_ = NULL;
				KatzeItem* item;
				gdouble sorting = 0.0;
				KatzeItem* _tmp17_;
				const gchar* _tmp18_ = NULL;
				gchar* _tmp19_;
				gchar* sorting_string;
				const gchar* _tmp20_;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp6_ = _tmp5_;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				if (!_tmp6_) {
#line 2776 "tabby.c"
					gint _tmp7_;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp7_ = i;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					i = _tmp7_ + 1;
#line 2782 "tabby.c"
				}
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp5_ = FALSE;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp8_ = i;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp9_ = new_tabs;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp10_ = _tmp9_->len;
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				if (!(((guint) _tmp8_) < _tmp10_)) {
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					break;
#line 2796 "tabby.c"
				}
#line 329 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp11_ = new_tabs;
#line 329 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp12_ = i;
#line 329 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp13_ = g_ptr_array_index (_tmp11_, (guint) _tmp12_);
#line 329 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp14_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, MIDORI_TYPE_VIEW) ? ((MidoriView*) _tmp13_) : NULL);
#line 329 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				tab = _tmp14_;
#line 331 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp15_ = tab;
#line 331 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp16_ = midori_view_get_proxy_item (_tmp15_);
#line 331 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				item = _tmp16_;
#line 334 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp17_ = item;
#line 334 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp18_ = katze_item_get_meta_string (_tmp17_, "sorting");
#line 334 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp19_ = g_strdup (_tmp18_);
#line 334 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				sorting_string = _tmp19_;
#line 335 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp20_ = sorting_string;
#line 335 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				if (_tmp20_ != NULL) {
#line 2826 "tabby.c"
					KatzeItem* _tmp21_;
					const gchar* _tmp22_ = NULL;
					gdouble _tmp23_ = 0.0;
					gboolean _tmp24_ = FALSE;
#line 336 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp21_ = item;
#line 336 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp22_ = katze_item_get_meta_string (_tmp21_, "sorting");
#line 336 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp24_ = double_try_parse (_tmp22_, &_tmp23_);
#line 336 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					sorting = _tmp23_;
#line 336 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp24_) {
#line 2841 "tabby.c"
						gdouble _tmp25_;
						gdouble* _tmp26_;
						GCompareDataFunc _tmp27_;
						void* _tmp27__target;
						GSList* _tmp28_;
						GSList* _tmp29_;
						gdouble _tmp30_;
						GCompareFunc _tmp31_;
						GSList* _tmp32_ = NULL;
						gint _tmp33_ = 0;
						gint index;
						MidoriBrowser* _tmp34_;
						GtkNotebook* _tmp35_ = NULL;
						GtkNotebook* _tmp36_;
						GtkNotebook* _tmp37_;
						MidoriView* _tmp38_;
						gint _tmp39_;
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp25_ = sorting;
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp26_ = __double_dup0 (&_tmp25_);
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp27_ = helper_compare_data;
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp27__target = helper_compare_data_target;
#line 337 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						self->tab_sorting = g_slist_insert_sorted_with_data (self->tab_sorting, _tmp26_, _tmp27_, _tmp27__target);
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp28_ = self->tab_sorting;
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp29_ = self->tab_sorting;
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp30_ = sorting;
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp31_ = helper_compare_func;
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp32_ = g_slist_find_custom (_tmp29_, &_tmp30_, _tmp31_);
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp33_ = g_slist_position (_tmp28_, _tmp32_);
#line 339 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						index = _tmp33_;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp34_ = self->priv->_browser;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						g_object_get (_tmp34_, "notebook", &_tmp35_, NULL);
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp36_ = _tmp35_;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp37_ = _tmp36_;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp38_ = tab;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp39_ = index;
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						gtk_notebook_reorder_child (_tmp37_, (GtkWidget*) _tmp38_, _tmp39_);
#line 341 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_g_object_unref0 (_tmp37_);
#line 2899 "tabby.c"
					}
				}
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (sorting_string);
#line 328 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (tab);
#line 2906 "tabby.c"
			}
		}
	}
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp40_ = self->priv->_browser;
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp40_, "notebook", &_tmp41_, NULL);
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp42_ = _tmp41_;
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp43_ = _tmp42_;
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp43_, "page-reordered", (GCallback) _tabby_base_session_tab_reordered_gtk_notebook_page_reordered, self, G_CONNECT_AFTER);
#line 345 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp43_);
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	(helper_compare_data_target_destroy_notify == NULL) ? NULL : (helper_compare_data_target_destroy_notify (helper_compare_data_target), NULL);
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data = NULL;
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data_target = NULL;
#line 314 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	helper_compare_data_target_destroy_notify = NULL;
#line 2930 "tabby.c"
}


static void tabby_base_session_helper_duplicate_tab (TabbyBaseSession* self, MidoriView* view, MidoriView* new_view, MidoriNewView where, gboolean user_initiated) {
	MidoriView* _tmp0_;
	KatzeItem* _tmp1_ = NULL;
	KatzeItem* item;
	MidoriView* _tmp2_;
	KatzeItem* _tmp3_ = NULL;
	KatzeItem* new_item;
	KatzeItem* _tmp4_;
	gint64 _tmp5_ = 0LL;
	gint64 tab_id;
	KatzeItem* _tmp6_;
	gint64 _tmp7_ = 0LL;
	gint64 new_tab_id;
	gboolean _tmp8_ = FALSE;
	gint64 _tmp9_;
	gboolean _tmp12_;
#line 348 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 348 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 348 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (new_view != NULL);
#line 349 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 349 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = midori_view_get_proxy_item (_tmp0_);
#line 349 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp1_;
#line 350 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = new_view;
#line 350 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = midori_view_get_proxy_item (_tmp2_);
#line 350 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	new_item = _tmp3_;
#line 351 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = item;
#line 351 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = katze_item_get_meta_integer (_tmp4_, "tabby-id");
#line 351 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp5_;
#line 352 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = new_item;
#line 352 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = katze_item_get_meta_integer (_tmp6_, "tabby-id");
#line 352 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	new_tab_id = _tmp7_;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = tab_id;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp9_ > ((gint64) 0)) {
#line 2984 "tabby.c"
		gint64 _tmp10_;
		gint64 _tmp11_;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = tab_id;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = new_tab_id;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = _tmp10_ == _tmp11_;
#line 2993 "tabby.c"
	} else {
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = FALSE;
#line 2997 "tabby.c"
	}
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp12_ = _tmp8_;
#line 354 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp12_) {
#line 3003 "tabby.c"
		KatzeItem* _tmp13_;
#line 355 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = new_item;
#line 355 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		katze_item_set_meta_integer (_tmp13_, "tabby-id", (gint64) 0);
#line 3009 "tabby.c"
	}
}


TabbyBaseSession* tabby_base_session_construct (GType object_type) {
	TabbyBaseSession * self = NULL;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyBaseSession*) g_object_new (object_type, NULL);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 3020 "tabby.c"
}


MidoriBrowser* tabby_base_session_get_browser (TabbyBaseSession* self) {
	MidoriBrowser* result;
	MidoriBrowser* _tmp0_;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_browser;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp0_;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 3035 "tabby.c"
}


void tabby_base_session_set_browser (TabbyBaseSession* self, MidoriBrowser* value) {
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = value;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->_browser);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_browser = _tmp1_;
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_notify ((GObject *) self, "browser");
#line 3054 "tabby.c"
}


TabbySessionState tabby_base_session_get_state (TabbyBaseSession* self) {
	TabbySessionState result;
	TabbySessionState _tmp0_;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_state;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp0_;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 3069 "tabby.c"
}


void tabby_base_session_set_state (TabbyBaseSession* self, TabbySessionState value) {
	TabbySessionState _tmp0_;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = value;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_state = _tmp0_;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_notify ((GObject *) self, "state");
#line 3083 "tabby.c"
}


static GObject * tabby_base_session_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	TabbyBaseSession * self;
#line 359 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	parent_class = G_OBJECT_CLASS (tabby_base_session_parent_class);
#line 359 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 359 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_BASE_TYPE_SESSION, TabbyBaseSession);
#line 360 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	__g_slist_free__g_free0_0 (self->tab_sorting);
#line 360 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->tab_sorting = NULL;
#line 359 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return obj;
#line 3103 "tabby.c"
}


static void tabby_base_session_class_init (TabbyBaseSessionClass * klass) {
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_parent_class = g_type_class_peek_parent (klass);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_type_class_add_private (klass, sizeof (TabbyBaseSessionPrivate));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->add_item = tabby_base_session_real_add_item;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->uri_changed = tabby_base_session_real_uri_changed;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->data_changed = tabby_base_session_real_data_changed;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_added = tabby_base_session_real_tab_added;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_removed = tabby_base_session_real_tab_removed;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_switched = tabby_base_session_real_tab_switched;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_reordered = tabby_base_session_real_tab_reordered;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->remove = tabby_base_session_real_remove;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->get_tabs = tabby_base_session_real_get_tabs;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->get_max_sorting = tabby_base_session_real_get_max_sorting;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->close = tabby_base_session_real_close;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_base_session_get_property;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_base_session_set_property;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->constructor = tabby_base_session_constructor;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_base_session_finalize;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_BASE_SESSION_BROWSER, g_param_spec_object ("browser", "browser", "browser", MIDORI_TYPE_BROWSER, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_BASE_SESSION_STATE, g_param_spec_enum ("state", "state", "state", TABBY_TYPE_SESSION_STATE, TABBY_SESSION_STATE_CLOSED, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3146 "tabby.c"
}


static void tabby_base_session_tabby_isession_interface_init (TabbyISessionIface * iface) {
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_base_session_tabby_isession_parent_iface = g_type_interface_peek_parent (iface);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->add_item = (void (*)(TabbyISession*, KatzeItem*)) tabby_base_session_add_item;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->remove = (void (*)(TabbyISession*)) tabby_base_session_remove;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->get_tabs = (KatzeArray* (*)(TabbyISession*)) tabby_base_session_get_tabs;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->attach = (void (*)(TabbyISession*, MidoriBrowser*)) tabby_base_session_real_attach;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->restore = (void (*)(TabbyISession*, MidoriBrowser*)) tabby_base_session_real_restore;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	iface->close = (void (*)(TabbyISession*)) tabby_base_session_close;
#line 3165 "tabby.c"
}


static void tabby_base_session_instance_init (TabbyBaseSession * self) {
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv = TABBY_BASE_SESSION_GET_PRIVATE (self);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_browser = NULL;
#line 102 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_state = TABBY_SESSION_STATE_CLOSED;
#line 3176 "tabby.c"
}


static void tabby_base_session_finalize (GObject* obj) {
	TabbyBaseSession * self;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_BASE_TYPE_SESSION, TabbyBaseSession);
#line 99 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	__g_slist_free__g_free0_0 (self->tab_sorting);
#line 101 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->_browser);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (tabby_base_session_parent_class)->finalize (obj);
#line 3190 "tabby.c"
}


GType tabby_base_session_get_type (void) {
	static volatile gsize tabby_base_session_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_base_session_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyBaseSessionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_base_session_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyBaseSession), 0, (GInstanceInitFunc) tabby_base_session_instance_init, NULL };
		static const GInterfaceInfo tabby_isession_info = { (GInterfaceInitFunc) tabby_base_session_tabby_isession_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType tabby_base_session_type_id;
		tabby_base_session_type_id = g_type_register_static (G_TYPE_OBJECT, "TabbyBaseSession", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_type_add_interface_static (tabby_base_session_type_id, TABBY_TYPE_ISESSION, &tabby_isession_info);
		g_once_init_leave (&tabby_base_session_type_id__volatile, tabby_base_session_type_id);
	}
	return tabby_base_session_type_id__volatile;
}


static void _vala_tabby_base_session_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	TabbyBaseSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_BASE_TYPE_SESSION, TabbyBaseSession);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_SESSION_BROWSER:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_value_set_object (value, tabby_base_session_get_browser (self));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_SESSION_STATE:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_value_set_enum (value, tabby_base_session_get_state (self));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 3225 "tabby.c"
		default:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 3231 "tabby.c"
	}
}


static void _vala_tabby_base_session_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	TabbyBaseSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_BASE_TYPE_SESSION, TabbyBaseSession);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_SESSION_BROWSER:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_set_browser (self, g_value_get_object (value));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_BASE_SESSION_STATE:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_set_state (self, g_value_get_enum (value));
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 3253 "tabby.c"
		default:
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 98 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 3259 "tabby.c"
	}
}


static void tabby_local_session_real_add_item (TabbyBaseSession* base, KatzeItem* item) {
	TabbyLocalSession * self;
	GDateTime* _tmp0_;
	GDateTime* time;
	KatzeItem* _tmp1_;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* sorting;
	gchar* _tmp9_;
	gchar* sqlcmd;
	KatzeItem* _tmp10_;
	gint64 _tmp11_ = 0LL;
	gint64 tstamp;
	gint64 _tmp12_;
	GError * _inner_error_ = NULL;
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (item != NULL);
#line 371 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = g_date_time_new_now_local ();
#line 371 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	time = _tmp0_;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = item;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = katze_item_get_meta_string (_tmp1_, "sorting");
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = _tmp3_;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = _tmp4_;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp5_ == NULL) {
#line 3303 "tabby.c"
		gchar* _tmp6_;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = g_strdup ("1");
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (_tmp4_);
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = _tmp6_;
#line 3311 "tabby.c"
	}
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = _tmp4_;
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = g_strdup (_tmp7_);
#line 372 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sorting = _tmp8_;
#line 373 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = g_strdup ("INSERT INTO `tabs` (`crdate`, `tstamp`, `session_id`, `uri`, `title`, " \
"`sorting`) VALUES (:crdate, :tstamp, :session_id, :uri, :title, :sorti" \
"ng);");
#line 373 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp9_;
#line 375 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp10_ = item;
#line 375 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp11_ = katze_item_get_meta_integer (_tmp10_, "tabby-tstamp");
#line 375 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tstamp = _tmp11_;
#line 376 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp12_ = tstamp;
#line 376 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp12_ < ((gint64) 0)) {
#line 377 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tstamp = (gint64) 0;
#line 3335 "tabby.c"
	}
	{
		MidoriDatabase* _tmp13_;
		const gchar* _tmp14_;
		GDateTime* _tmp15_;
		gint64 _tmp16_ = 0LL;
		gint64 _tmp17_;
		gint64 _tmp18_;
		KatzeItem* _tmp19_;
		const gchar* _tmp20_;
		const gchar* _tmp21_;
		KatzeItem* _tmp22_;
		const gchar* _tmp23_;
		const gchar* _tmp24_;
		const gchar* _tmp25_;
		gdouble _tmp26_ = 0.0;
		MidoriDatabaseStatement* _tmp27_ = NULL;
		MidoriDatabaseStatement* statement;
		MidoriDatabaseStatement* _tmp28_;
		MidoriDatabaseStatement* _tmp29_;
		gint64 _tmp30_ = 0LL;
		gint64 tab_id;
		KatzeItem* _tmp31_;
		gint64 _tmp32_;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = self->priv->database;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = sqlcmd;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = time;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = g_date_time_to_unix (_tmp15_);
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp17_ = tstamp;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp18_ = self->priv->_id;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp19_ = item;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp20_ = katze_item_get_uri (_tmp19_);
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp21_ = _tmp20_;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp22_ = item;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp23_ = katze_item_get_name (_tmp22_);
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp24_ = _tmp23_;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp25_ = sorting;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp26_ = double_parse (_tmp25_);
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp27_ = midori_database_prepare (_tmp13_, _tmp14_, &_inner_error_, ":crdate", G_TYPE_INT64, _tmp16_, ":tstamp", G_TYPE_INT64, _tmp17_, ":session_id", G_TYPE_INT64, _tmp18_, ":uri", G_TYPE_STRING, _tmp21_, ":title", G_TYPE_STRING, _tmp24_, ":sorting", G_TYPE_DOUBLE, _tmp26_, NULL);
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		statement = _tmp27_;
#line 381 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3394 "tabby.c"
			goto __catch0_g_error;
		}
#line 388 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp28_ = statement;
#line 388 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp28_, &_inner_error_);
#line 388 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 388 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 3405 "tabby.c"
			goto __catch0_g_error;
		}
#line 389 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp29_ = statement;
#line 389 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp30_ = midori_database_statement_row_id (_tmp29_, &_inner_error_);
#line 389 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tab_id = _tmp30_;
#line 389 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 389 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 3418 "tabby.c"
			goto __catch0_g_error;
		}
#line 390 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp31_ = item;
#line 390 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp32_ = tab_id;
#line 390 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		katze_item_set_meta_integer (_tmp31_, "tabby-id", _tmp32_);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (statement);
#line 3429 "tabby.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp33_ = NULL;
		GError* _tmp34_;
		const gchar* _tmp35_;
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 392 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp33_ = _ ("Failed to update database: %s");
#line 392 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp34_ = _error_;
#line 392 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp35_ = _tmp34_->message;
#line 392 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp33_, _tmp35_);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 3452 "tabby.c"
	}
	__finally0:
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sorting);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (_tmp4_);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_date_time_unref0 (time);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 380 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 3471 "tabby.c"
	}
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sorting);
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (_tmp4_);
#line 370 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_date_time_unref0 (time);
#line 3481 "tabby.c"
}


static void tabby_local_session_real_uri_changed (TabbyBaseSession* base, MidoriView* view, const gchar* uri) {
	TabbyLocalSession * self;
	MidoriView* _tmp0_;
	KatzeItem* _tmp1_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp2_;
	gint64 _tmp3_ = 0LL;
	gint64 tab_id;
	gchar* _tmp4_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 396 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 396 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 396 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (uri != NULL);
#line 397 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 397 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = midori_view_get_proxy_item (_tmp0_);
#line 397 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp1_;
#line 398 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = item;
#line 398 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = katze_item_get_meta_integer (_tmp2_, "tabby-id");
#line 398 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp3_;
#line 399 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = g_strdup ("UPDATE `tabs` SET uri = :uri WHERE session_id = :session_id AND id = :" \
"tab_id;");
#line 399 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp4_;
#line 3518 "tabby.c"
	{
		MidoriDatabase* _tmp5_;
		const gchar* _tmp6_;
		const gchar* _tmp7_;
		gint64 _tmp8_;
		gint64 _tmp9_;
		MidoriDatabaseStatement* _tmp10_ = NULL;
		MidoriDatabaseStatement* _tmp11_;
		MidoriDatabaseStatement* _tmp12_;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = self->priv->database;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = sqlcmd;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = uri;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = self->priv->_id;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = tab_id;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = midori_database_prepare (_tmp5_, _tmp6_, &_inner_error_, ":uri", G_TYPE_STRING, _tmp7_, ":session_id", G_TYPE_INT64, _tmp8_, ":tab_id", G_TYPE_INT64, _tmp9_, NULL);
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = _tmp10_;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3544 "tabby.c"
			goto __catch1_g_error;
		}
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _tmp11_;
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp12_, &_inner_error_);
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp12_);
#line 401 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3555 "tabby.c"
			goto __catch1_g_error;
		}
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp13_ = NULL;
		GError* _tmp14_;
		const gchar* _tmp15_;
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 406 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _ ("Failed to update database: %s");
#line 406 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _error_;
#line 406 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _tmp14_->message;
#line 406 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp13_, _tmp15_);
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 3580 "tabby.c"
	}
	__finally1:
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 400 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 3593 "tabby.c"
	}
#line 396 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 3597 "tabby.c"
}


static void tabby_local_session_real_data_changed (TabbyBaseSession* base, MidoriView* view) {
	TabbyLocalSession * self;
	MidoriView* _tmp0_;
	KatzeItem* _tmp1_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp2_;
	gint64 _tmp3_ = 0LL;
	gint64 tab_id;
	gchar* _tmp4_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 410 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 410 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 411 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 411 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = midori_view_get_proxy_item (_tmp0_);
#line 411 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp1_;
#line 412 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = item;
#line 412 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = katze_item_get_meta_integer (_tmp2_, "tabby-id");
#line 412 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp3_;
#line 413 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = g_strdup ("UPDATE `tabs` SET title = :title WHERE session_id = :session_id AND id" \
" = :tab_id;");
#line 413 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp4_;
#line 3632 "tabby.c"
	{
		MidoriDatabase* _tmp5_;
		const gchar* _tmp6_;
		MidoriView* _tmp7_;
		const gchar* _tmp8_ = NULL;
		gint64 _tmp9_;
		gint64 _tmp10_;
		MidoriDatabaseStatement* _tmp11_ = NULL;
		MidoriDatabaseStatement* _tmp12_;
		MidoriDatabaseStatement* _tmp13_;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = self->priv->database;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = sqlcmd;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = view;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = midori_view_get_display_title (_tmp7_);
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = self->priv->_id;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = tab_id;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = midori_database_prepare (_tmp5_, _tmp6_, &_inner_error_, ":title", G_TYPE_STRING, _tmp8_, ":session_id", G_TYPE_INT64, _tmp9_, ":tab_id", G_TYPE_INT64, _tmp10_, NULL);
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _tmp11_;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3661 "tabby.c"
			goto __catch2_g_error;
		}
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _tmp12_;
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp13_, &_inner_error_);
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp13_);
#line 415 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3672 "tabby.c"
			goto __catch2_g_error;
		}
	}
	goto __finally2;
	__catch2_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp14_ = NULL;
		GError* _tmp15_;
		const gchar* _tmp16_;
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 420 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _ ("Failed to update database: %s");
#line 420 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _error_;
#line 420 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = _tmp15_->message;
#line 420 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp14_, _tmp16_);
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 3697 "tabby.c"
	}
	__finally2:
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 414 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 3710 "tabby.c"
	}
#line 410 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 3714 "tabby.c"
}


static void tabby_local_session_real_tab_added (TabbyBaseSession* base, MidoriBrowser* browser, MidoriView* view) {
	TabbyLocalSession * self;
	MidoriView* _tmp0_;
	KatzeItem* _tmp1_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp2_;
	gint64 _tmp3_ = 0LL;
	gint64 tab_id;
	gint64 _tmp4_;
#line 424 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 424 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 424 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 425 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 425 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = midori_view_get_proxy_item (_tmp0_);
#line 425 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp1_;
#line 426 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = item;
#line 426 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = katze_item_get_meta_integer (_tmp2_, "tabby-id");
#line 426 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp3_;
#line 427 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = tab_id;
#line 427 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp4_ < ((gint64) 1)) {
#line 3749 "tabby.c"
		MidoriView* _tmp5_;
		gdouble _tmp6_ = 0.0;
		gdouble sorting;
		KatzeItem* _tmp7_;
		gdouble _tmp8_;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_;
		KatzeItem* _tmp11_;
#line 428 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = view;
#line 428 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = tabby_base_session_get_tab_sorting ((TabbyBaseSession*) self, _tmp5_);
#line 428 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		sorting = _tmp6_;
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = item;
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = sorting;
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = double_to_string (_tmp8_);
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = _tmp9_;
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		katze_item_set_meta_string (_tmp7_, "sorting", _tmp10_);
#line 429 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (_tmp10_);
#line 430 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = item;
#line 430 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_add_item ((TabbyBaseSession*) self, _tmp11_);
#line 3780 "tabby.c"
	}
}


static void tabby_local_session_real_tab_removed (TabbyBaseSession* base, MidoriBrowser* browser, MidoriView* view) {
	TabbyLocalSession * self;
	MidoriView* _tmp0_;
	KatzeItem* _tmp1_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp2_;
	gint64 _tmp3_ = 0LL;
	gint64 tab_id;
	gchar* _tmp4_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 434 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 434 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 434 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (view != NULL);
#line 435 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = view;
#line 435 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = midori_view_get_proxy_item (_tmp0_);
#line 435 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp1_;
#line 436 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = item;
#line 436 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = katze_item_get_meta_integer (_tmp2_, "tabby-id");
#line 436 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp3_;
#line 438 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = g_strdup ("DELETE FROM `tabs` WHERE session_id = :session_id AND id = :tab_id;");
#line 438 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp4_;
#line 3818 "tabby.c"
	{
		MidoriDatabase* _tmp5_;
		const gchar* _tmp6_;
		gint64 _tmp7_;
		gint64 _tmp8_;
		MidoriDatabaseStatement* _tmp9_ = NULL;
		MidoriDatabaseStatement* _tmp10_;
		MidoriDatabaseStatement* _tmp11_;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = self->priv->database;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = sqlcmd;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = self->priv->_id;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = tab_id;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = midori_database_prepare (_tmp5_, _tmp6_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp7_, ":tab_id", G_TYPE_INT64, _tmp8_, NULL);
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = _tmp9_;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3841 "tabby.c"
			goto __catch3_g_error;
		}
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = _tmp10_;
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp11_, &_inner_error_);
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp11_);
#line 440 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3852 "tabby.c"
			goto __catch3_g_error;
		}
	}
	goto __finally3;
	__catch3_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp12_ = NULL;
		GError* _tmp13_;
		const gchar* _tmp14_;
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 444 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _ ("Failed to update database: %s");
#line 444 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _error_;
#line 444 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _tmp13_->message;
#line 444 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp12_, _tmp14_);
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 3877 "tabby.c"
	}
	__finally3:
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 439 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 3890 "tabby.c"
	}
#line 434 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 3894 "tabby.c"
}


static void tabby_local_session_real_tab_switched (TabbyBaseSession* base, MidoriView* old_view, MidoriView* new_view) {
	TabbyLocalSession * self;
	GDateTime* _tmp0_;
	GDateTime* time;
	MidoriView* _tmp1_;
	KatzeItem* _tmp2_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp3_;
	gint64 _tmp4_ = 0LL;
	gint64 tab_id;
	GDateTime* _tmp5_;
	gint64 _tmp6_ = 0LL;
	gint64 tstamp;
	KatzeItem* _tmp7_;
	gint64 _tmp8_;
	gchar* _tmp9_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 448 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 449 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = g_date_time_new_now_local ();
#line 449 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	time = _tmp0_;
#line 450 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = new_view;
#line 450 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = midori_view_get_proxy_item (_tmp1_);
#line 450 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp2_;
#line 451 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = item;
#line 451 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = katze_item_get_meta_integer (_tmp3_, "tabby-id");
#line 451 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp4_;
#line 452 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = time;
#line 452 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = g_date_time_to_unix (_tmp5_);
#line 452 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tstamp = _tmp6_;
#line 453 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = item;
#line 453 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = tstamp;
#line 453 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	katze_item_set_meta_integer (_tmp7_, "tabby-tstamp", _tmp8_);
#line 454 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = g_strdup ("UPDATE `tabs` SET tstamp = :tstamp WHERE session_id = :session_id AND " \
"id = :tab_id;");
#line 454 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp9_;
#line 3950 "tabby.c"
	{
		MidoriDatabase* _tmp10_;
		const gchar* _tmp11_;
		gint64 _tmp12_;
		gint64 _tmp13_;
		gint64 _tmp14_;
		MidoriDatabaseStatement* _tmp15_ = NULL;
		MidoriDatabaseStatement* _tmp16_;
		MidoriDatabaseStatement* _tmp17_;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = self->priv->database;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = sqlcmd;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = self->priv->_id;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = tab_id;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = tstamp;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = midori_database_prepare (_tmp10_, _tmp11_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp12_, ":tab_id", G_TYPE_INT64, _tmp13_, ":tstamp", G_TYPE_INT64, _tmp14_, NULL);
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = _tmp15_;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3976 "tabby.c"
			goto __catch4_g_error;
		}
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp17_ = _tmp16_;
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp17_, &_inner_error_);
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp17_);
#line 456 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 3987 "tabby.c"
			goto __catch4_g_error;
		}
	}
	goto __finally4;
	__catch4_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp18_ = NULL;
		GError* _tmp19_;
		const gchar* _tmp20_;
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 461 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp18_ = _ ("Failed to update database: %s");
#line 461 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp19_ = _error_;
#line 461 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp20_ = _tmp19_->message;
#line 461 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp18_, _tmp20_);
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4012 "tabby.c"
	}
	__finally4:
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_date_time_unref0 (time);
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 455 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 4027 "tabby.c"
	}
#line 448 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 448 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_date_time_unref0 (time);
#line 4033 "tabby.c"
}


static void tabby_local_session_real_tab_reordered (TabbyBaseSession* base, GtkWidget* tab, guint pos) {
	TabbyLocalSession * self;
	GtkWidget* _tmp0_;
	MidoriView* _tmp1_;
	MidoriView* view;
	MidoriView* _tmp2_;
	gdouble _tmp3_ = 0.0;
	gdouble sorting;
	MidoriView* _tmp4_;
	KatzeItem* _tmp5_ = NULL;
	KatzeItem* item;
	KatzeItem* _tmp6_;
	gint64 _tmp7_ = 0LL;
	gint64 tab_id;
	gchar* _tmp8_;
	gchar* sqlcmd;
	KatzeItem* _tmp20_;
	gdouble _tmp21_;
	gchar* _tmp22_ = NULL;
	gchar* _tmp23_;
	GError * _inner_error_ = NULL;
#line 465 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 465 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (tab != NULL);
#line 466 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tab;
#line 466 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, MIDORI_TYPE_VIEW) ? ((MidoriView*) _tmp0_) : NULL);
#line 466 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	view = _tmp1_;
#line 468 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = view;
#line 468 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = tabby_base_session_get_tab_sorting ((TabbyBaseSession*) self, _tmp2_);
#line 468 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sorting = _tmp3_;
#line 469 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = view;
#line 469 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = midori_view_get_proxy_item (_tmp4_);
#line 469 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	item = _tmp5_;
#line 470 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = item;
#line 470 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = katze_item_get_meta_integer (_tmp6_, "tabby-id");
#line 470 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tab_id = _tmp7_;
#line 471 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = g_strdup ("UPDATE `tabs` SET sorting = :sorting WHERE session_id = :session_id AN" \
"D id = :tab_id;");
#line 471 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp8_;
#line 4090 "tabby.c"
	{
		MidoriDatabase* _tmp9_;
		const gchar* _tmp10_;
		gint64 _tmp11_;
		gint64 _tmp12_;
		gdouble _tmp13_;
		MidoriDatabaseStatement* _tmp14_ = NULL;
		MidoriDatabaseStatement* _tmp15_;
		MidoriDatabaseStatement* _tmp16_;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = self->priv->database;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = sqlcmd;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = self->priv->_id;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = tab_id;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = sorting;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = midori_database_prepare (_tmp9_, _tmp10_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp11_, ":tab_id", G_TYPE_INT64, _tmp12_, ":sorting", G_TYPE_DOUBLE, _tmp13_, NULL);
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _tmp14_;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4116 "tabby.c"
			goto __catch5_g_error;
		}
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = _tmp15_;
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp16_, &_inner_error_);
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp16_);
#line 473 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4127 "tabby.c"
			goto __catch5_g_error;
		}
	}
	goto __finally5;
	__catch5_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp17_ = NULL;
		GError* _tmp18_;
		const gchar* _tmp19_;
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 478 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp17_ = _ ("Failed to update database: %s");
#line 478 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp18_ = _error_;
#line 478 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp19_ = _tmp18_->message;
#line 478 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp17_, _tmp19_);
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4152 "tabby.c"
	}
	__finally5:
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (view);
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 472 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 4167 "tabby.c"
	}
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp20_ = item;
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp21_ = sorting;
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp22_ = double_to_string (_tmp21_);
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp23_ = _tmp22_;
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	katze_item_set_meta_string (_tmp20_, "sorting", _tmp23_);
#line 481 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (_tmp23_);
#line 465 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 465 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (view);
#line 4185 "tabby.c"
}


static void tabby_local_session_real_remove (TabbyBaseSession* base) {
	TabbyLocalSession * self;
	gchar* _tmp0_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 484 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 485 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = g_strdup ("\n" \
"                    DELETE FROM `tabs` WHERE session_id = :session_id;" \
"\n" \
"                    DELETE FROM `sessions` WHERE id = :session_id;\n" \
"                    ");
#line 485 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp0_;
#line 4200 "tabby.c"
	{
		MidoriDatabase* _tmp1_;
		const gchar* _tmp2_;
		gint64 _tmp3_;
		MidoriDatabaseStatement* _tmp4_ = NULL;
		MidoriDatabaseStatement* _tmp5_;
		MidoriDatabaseStatement* _tmp6_;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp1_ = self->priv->database;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = sqlcmd;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = self->priv->_id;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = midori_database_prepare (_tmp1_, _tmp2_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp3_, NULL);
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = _tmp4_;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4220 "tabby.c"
			goto __catch6_g_error;
		}
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = _tmp5_;
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp6_, &_inner_error_);
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp6_);
#line 490 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4231 "tabby.c"
			goto __catch6_g_error;
		}
	}
	goto __finally6;
	__catch6_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp7_ = NULL;
		GError* _tmp8_;
		const gchar* _tmp9_;
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 493 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = _ ("Failed to update database: %s");
#line 493 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = _error_;
#line 493 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = _tmp8_->message;
#line 493 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp7_, _tmp9_);
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4256 "tabby.c"
	}
	__finally6:
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 489 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 4269 "tabby.c"
	}
#line 484 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 4273 "tabby.c"
}


static void tabby_local_session_real_close (TabbyBaseSession* base) {
	TabbyLocalSession * self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* my_browser;
	gboolean should_break;
	gboolean _tmp3_ = FALSE;
	MidoriBrowser* _tmp4_;
	gboolean _tmp8_;
	GDateTime* _tmp20_;
	GDateTime* time;
	gchar* _tmp21_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 497 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 499 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_base_session_get_browser ((TabbyBaseSession*) self);
#line 499 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _tmp0_;
#line 499 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 499 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	my_browser = _tmp2_;
#line 500 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (tabby_local_session_parent_class)->close (G_TYPE_CHECK_INSTANCE_CAST (self, TABBY_BASE_TYPE_SESSION, TabbyBaseSession));
#line 502 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	should_break = TRUE;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = my_browser;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp4_ != NULL) {
#line 4310 "tabby.c"
		MidoriBrowser* _tmp5_;
		gboolean _tmp6_;
		gboolean _tmp7_;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = my_browser;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = gtk_window_get_destroy_with_parent ((GtkWindow*) _tmp5_);
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = _tmp6_;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = !_tmp7_;
#line 4322 "tabby.c"
	} else {
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = FALSE;
#line 4326 "tabby.c"
	}
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = _tmp3_;
#line 503 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp8_) {
#line 4332 "tabby.c"
		MidoriApp* _tmp9_;
		GList* _tmp10_ = NULL;
		gboolean _tmp19_;
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = tabby_APP;
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = midori_app_get_browsers (_tmp9_);
#line 4340 "tabby.c"
		{
			GList* browser_collection = NULL;
			GList* browser_it = NULL;
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			browser_collection = _tmp10_;
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			for (browser_it = browser_collection; browser_it != NULL; browser_it = browser_it->next) {
#line 4348 "tabby.c"
				MidoriBrowser* _tmp11_;
				MidoriBrowser* browser = NULL;
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp11_ = _g_object_ref0 ((MidoriBrowser*) browser_it->data);
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				browser = _tmp11_;
#line 4355 "tabby.c"
				{
					gboolean _tmp12_ = FALSE;
					MidoriBrowser* _tmp13_;
					MidoriBrowser* _tmp14_;
					gboolean _tmp18_;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp13_ = browser;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp14_ = my_browser;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp13_ != _tmp14_) {
#line 4367 "tabby.c"
						MidoriBrowser* _tmp15_;
						gboolean _tmp16_;
						gboolean _tmp17_;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp15_ = browser;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp16_ = gtk_window_get_destroy_with_parent ((GtkWindow*) _tmp15_);
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp17_ = _tmp16_;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp12_ = !_tmp17_;
#line 4379 "tabby.c"
					} else {
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp12_ = FALSE;
#line 4383 "tabby.c"
					}
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp18_ = _tmp12_;
#line 505 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp18_) {
#line 506 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						should_break = FALSE;
#line 507 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_g_object_unref0 (browser);
#line 507 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						break;
#line 4395 "tabby.c"
					}
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_g_object_unref0 (browser);
#line 4399 "tabby.c"
				}
			}
#line 504 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_list_free0 (browser_collection);
#line 4404 "tabby.c"
		}
#line 511 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp19_ = should_break;
#line 511 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp19_) {
#line 512 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (my_browser);
#line 512 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			return;
#line 4414 "tabby.c"
		}
	}
#line 516 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp20_ = g_date_time_new_now_local ();
#line 516 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	time = _tmp20_;
#line 517 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp21_ = g_strdup ("UPDATE `sessions` SET closed = 1, tstamp = :tstamp WHERE id = :session" \
"_id;");
#line 517 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp21_;
#line 4425 "tabby.c"
	{
		MidoriDatabase* _tmp22_;
		const gchar* _tmp23_;
		gint64 _tmp24_;
		GDateTime* _tmp25_;
		gint64 _tmp26_ = 0LL;
		MidoriDatabaseStatement* _tmp27_ = NULL;
		MidoriDatabaseStatement* _tmp28_;
		MidoriDatabaseStatement* _tmp29_;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp22_ = self->priv->database;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp23_ = sqlcmd;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp24_ = self->priv->_id;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp25_ = time;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp26_ = g_date_time_to_unix (_tmp25_);
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp27_ = midori_database_prepare (_tmp22_, _tmp23_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp24_, ":tstamp", G_TYPE_INT64, _tmp26_, NULL);
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp28_ = _tmp27_;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4451 "tabby.c"
			goto __catch7_g_error;
		}
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp29_ = _tmp28_;
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp29_, &_inner_error_);
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp29_);
#line 519 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4462 "tabby.c"
			goto __catch7_g_error;
		}
	}
	goto __finally7;
	__catch7_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp30_ = NULL;
		GError* _tmp31_;
		const gchar* _tmp32_;
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 523 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp30_ = _ ("Failed to update database: %s");
#line 523 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp31_ = _error_;
#line 523 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp32_ = _tmp31_->message;
#line 523 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp30_, _tmp32_);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4487 "tabby.c"
	}
	__finally7:
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_date_time_unref0 (time);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (my_browser);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 518 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 4504 "tabby.c"
	}
#line 497 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 497 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_date_time_unref0 (time);
#line 497 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (my_browser);
#line 4512 "tabby.c"
}


static KatzeArray* tabby_local_session_real_get_tabs (TabbyBaseSession* base) {
	TabbyLocalSession * self;
	KatzeArray* result = NULL;
	KatzeArray* _tmp0_;
	KatzeArray* tabs;
	gchar* _tmp1_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 527 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 528 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = katze_array_new (KATZE_TYPE_ITEM);
#line 528 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabs = _tmp0_;
#line 530 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = g_strdup ("SELECT id, uri, title, sorting FROM tabs WHERE session_id = :session_i" \
"d ORDER BY tstamp DESC");
#line 530 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp1_;
#line 4534 "tabby.c"
	{
		MidoriDatabase* _tmp2_;
		const gchar* _tmp3_;
		gint64 _tmp4_;
		MidoriDatabaseStatement* _tmp5_ = NULL;
		MidoriDatabaseStatement* statement;
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = self->priv->database;
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = sqlcmd;
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = self->priv->_id;
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = midori_database_prepare (_tmp2_, _tmp3_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp4_, NULL);
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		statement = _tmp5_;
#line 532 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4553 "tabby.c"
			goto __catch8_g_error;
		}
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		while (TRUE) {
#line 4558 "tabby.c"
			MidoriDatabaseStatement* _tmp6_;
			gboolean _tmp7_ = FALSE;
			gboolean _tmp8_;
			KatzeItem* _tmp9_;
			KatzeItem* item;
			MidoriDatabaseStatement* _tmp10_;
			gint64 _tmp11_ = 0LL;
			gint64 id;
			MidoriDatabaseStatement* _tmp12_;
			gchar* _tmp13_ = NULL;
			gchar* uri;
			MidoriDatabaseStatement* _tmp14_;
			gchar* _tmp15_ = NULL;
			gchar* title;
			MidoriDatabaseStatement* _tmp16_;
			gdouble _tmp17_ = 0.0;
			gdouble sorting;
			KatzeItem* _tmp18_;
			const gchar* _tmp19_;
			KatzeItem* _tmp20_;
			const gchar* _tmp21_;
			KatzeItem* _tmp22_;
			gint64 _tmp23_;
			KatzeItem* _tmp24_;
			gdouble _tmp25_;
			gchar* _tmp26_ = NULL;
			gchar* _tmp27_;
			KatzeItem* _tmp28_;
			KatzeArray* _tmp29_;
			KatzeItem* _tmp30_;
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp6_ = statement;
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp7_ = midori_database_statement_step (_tmp6_, &_inner_error_);
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp8_ = _tmp7_;
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 4599 "tabby.c"
				goto __catch8_g_error;
			}
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (!_tmp8_) {
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				break;
#line 4606 "tabby.c"
			}
#line 535 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp9_ = katze_item_new ();
#line 535 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			item = _tmp9_;
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp10_ = statement;
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp11_ = midori_database_statement_get_int64 (_tmp10_, "id", &_inner_error_);
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			id = _tmp11_;
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 536 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 4624 "tabby.c"
				goto __catch8_g_error;
			}
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp12_ = statement;
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = midori_database_statement_get_string (_tmp12_, "uri", &_inner_error_);
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			uri = _tmp13_;
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 537 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 4639 "tabby.c"
				goto __catch8_g_error;
			}
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp14_ = statement;
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp15_ = midori_database_statement_get_string (_tmp14_, "title", &_inner_error_);
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			title = _tmp15_;
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (uri);
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 538 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 4656 "tabby.c"
				goto __catch8_g_error;
			}
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp16_ = statement;
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp17_ = midori_database_statement_get_double (_tmp16_, "sorting", &_inner_error_);
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			sorting = _tmp17_;
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (title);
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (uri);
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (item);
#line 539 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 4675 "tabby.c"
				goto __catch8_g_error;
			}
#line 540 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp18_ = item;
#line 540 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp19_ = uri;
#line 540 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_uri (_tmp18_, _tmp19_);
#line 541 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp20_ = item;
#line 541 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp21_ = title;
#line 541 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_name (_tmp20_, _tmp21_);
#line 542 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp22_ = item;
#line 542 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp23_ = id;
#line 542 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_meta_integer (_tmp22_, "tabby-id", _tmp23_);
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp24_ = item;
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp25_ = sorting;
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp26_ = double_to_string (_tmp25_);
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp27_ = _tmp26_;
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_meta_string (_tmp24_, "sorting", _tmp27_);
#line 543 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_free0 (_tmp27_);
#line 545 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp28_ = item;
#line 545 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			katze_item_set_meta_string (_tmp28_, "history-step", "ignore");
#line 546 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp29_ = tabs;
#line 546 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp30_ = item;
#line 546 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_signal_emit_by_name (_tmp29_, "add-item", (GObject*) _tmp30_);
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_free0 (title);
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_free0 (uri);
#line 534 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (item);
#line 4724 "tabby.c"
		}
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (statement);
#line 4728 "tabby.c"
	}
	goto __finally8;
	__catch8_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp31_ = NULL;
		GError* _tmp32_;
		const gchar* _tmp33_;
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 549 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp31_ = _ ("Failed to select from database: %s");
#line 549 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp32_ = _error_;
#line 549 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp33_ = _tmp32_->message;
#line 549 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp31_, _tmp33_);
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4751 "tabby.c"
	}
	__finally8:
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (tabs);
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 531 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return NULL;
#line 4766 "tabby.c"
	}
#line 551 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = tabs;
#line 551 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 551 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 4774 "tabby.c"
}


static gdouble tabby_local_session_real_get_max_sorting (TabbyBaseSession* base) {
	TabbyLocalSession * self;
	gdouble result = 0.0;
	gchar* _tmp0_;
	gchar* sqlcmd;
	gdouble _tmp17_ = 0.0;
	GError * _inner_error_ = NULL;
#line 554 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) base;
#line 555 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = g_strdup ("SELECT MAX(sorting) FROM tabs WHERE session_id = :session_id");
#line 555 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp0_;
#line 4791 "tabby.c"
	{
		MidoriDatabase* _tmp1_;
		const gchar* _tmp2_;
		gint64 _tmp3_;
		MidoriDatabaseStatement* _tmp4_ = NULL;
		MidoriDatabaseStatement* statement;
		MidoriDatabaseStatement* _tmp5_;
		gdouble sorting = 0.0;
		MidoriDatabaseStatement* _tmp6_;
		gint64 _tmp7_ = 0LL;
		gint64 _tmp8_;
		gchar* _tmp9_ = NULL;
		gchar* sorting_string;
		const gchar* _tmp10_;
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp1_ = self->priv->database;
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = sqlcmd;
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = self->priv->_id;
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = midori_database_prepare (_tmp1_, _tmp2_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp3_, NULL);
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		statement = _tmp4_;
#line 557 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4818 "tabby.c"
			goto __catch9_g_error;
		}
#line 559 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = statement;
#line 559 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_step (_tmp5_, &_inner_error_);
#line 559 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 559 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 4829 "tabby.c"
			goto __catch9_g_error;
		}
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = statement;
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = midori_database_statement_get_int64 (_tmp6_, "MAX(sorting)", &_inner_error_);
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = _tmp7_;
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 4842 "tabby.c"
			goto __catch9_g_error;
		}
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp8_);
#line 561 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		sorting_string = _tmp9_;
#line 562 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = sorting_string;
#line 562 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp10_ != NULL) {
#line 4853 "tabby.c"
			const gchar* _tmp11_;
			gdouble _tmp12_ = 0.0;
			gboolean _tmp13_ = FALSE;
#line 565 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp11_ = sorting_string;
#line 565 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = double_try_parse (_tmp11_, &_tmp12_);
#line 565 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			sorting = _tmp12_;
#line 565 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_tmp13_) {
#line 566 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				result = sorting;
#line 566 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (sorting_string);
#line 566 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 566 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_free0 (sqlcmd);
#line 566 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				return result;
#line 4875 "tabby.c"
			}
		}
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sorting_string);
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (statement);
#line 4882 "tabby.c"
	}
	goto __finally9;
	__catch9_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp14_ = NULL;
		GError* _tmp15_;
		const gchar* _tmp16_;
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 570 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _ ("Failed to select from database: %s");
#line 570 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _error_;
#line 570 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp16_ = _tmp15_->message;
#line 570 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp14_, _tmp16_);
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 4905 "tabby.c"
	}
	__finally9:
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 556 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return 0.0;
#line 4918 "tabby.c"
	}
#line 573 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp17_ = double_parse ("0");
#line 573 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp17_;
#line 573 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 573 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 4928 "tabby.c"
}


TabbyLocalSession* tabby_local_session_construct (GType object_type, MidoriDatabase* database) {
	TabbyLocalSession * self = NULL;
	MidoriDatabase* _tmp0_;
	MidoriDatabase* _tmp1_;
	GDateTime* _tmp2_;
	GDateTime* time;
	gchar* _tmp3_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (database != NULL, NULL);
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) tabby_base_session_construct (object_type);
#line 577 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = database;
#line 577 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 577 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->database);
#line 577 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->database = _tmp1_;
#line 579 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = g_date_time_new_now_local ();
#line 579 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	time = _tmp2_;
#line 581 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = g_strdup ("INSERT INTO `sessions` (`tstamp`) VALUES (:tstamp);");
#line 581 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp3_;
#line 4961 "tabby.c"
	{
		MidoriDatabase* _tmp4_;
		const gchar* _tmp5_;
		GDateTime* _tmp6_;
		gint64 _tmp7_ = 0LL;
		MidoriDatabaseStatement* _tmp8_ = NULL;
		MidoriDatabaseStatement* statement;
		MidoriDatabaseStatement* _tmp9_;
		MidoriDatabaseStatement* _tmp10_;
		gint64 _tmp11_ = 0LL;
		gint64 _tmp12_;
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = database;
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = sqlcmd;
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = time;
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = g_date_time_to_unix (_tmp6_);
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = midori_database_prepare (_tmp4_, _tmp5_, &_inner_error_, ":tstamp", G_TYPE_INT64, _tmp7_, NULL);
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		statement = _tmp8_;
#line 584 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 4987 "tabby.c"
			goto __catch10_g_error;
		}
#line 586 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = statement;
#line 586 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp9_, &_inner_error_);
#line 586 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 586 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 4998 "tabby.c"
			goto __catch10_g_error;
		}
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = statement;
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = midori_database_statement_row_id (_tmp10_, &_inner_error_);
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _tmp11_;
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (statement);
#line 5011 "tabby.c"
			goto __catch10_g_error;
		}
#line 587 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_local_session_set_id (self, _tmp12_);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (statement);
#line 5018 "tabby.c"
	}
	goto __finally10;
	__catch10_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp13_ = NULL;
		GError* _tmp14_;
		const gchar* _tmp15_;
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 589 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _ ("Failed to update database: %s");
#line 589 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _error_;
#line 589 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _tmp14_->message;
#line 589 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp13_, _tmp15_);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 5041 "tabby.c"
	}
	__finally10:
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_date_time_unref0 (time);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 583 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return NULL;
#line 5056 "tabby.c"
	}
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_date_time_unref0 (time);
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 5064 "tabby.c"
}


TabbyLocalSession* tabby_local_session_new (MidoriDatabase* database) {
#line 576 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return tabby_local_session_construct (TABBY_LOCAL_TYPE_SESSION, database);
#line 5071 "tabby.c"
}


TabbyLocalSession* tabby_local_session_construct_with_id (GType object_type, MidoriDatabase* database, gint64 id) {
	TabbyLocalSession * self = NULL;
	MidoriDatabase* _tmp0_;
	MidoriDatabase* _tmp1_;
	gint64 _tmp2_;
	GDateTime* _tmp3_;
	GDateTime* time;
	gchar* _tmp4_;
	gchar* sqlcmd;
	GError * _inner_error_ = NULL;
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (database != NULL, NULL);
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalSession*) tabby_base_session_construct (object_type);
#line 594 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = database;
#line 594 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 594 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->database);
#line 594 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->database = _tmp1_;
#line 595 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = id;
#line 595 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_local_session_set_id (self, _tmp2_);
#line 597 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = g_date_time_new_now_local ();
#line 597 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	time = _tmp3_;
#line 598 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = g_strdup ("UPDATE `sessions` SET closed = 0, tstamp = :tstamp WHERE id = :session" \
"_id;");
#line 598 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp4_;
#line 5109 "tabby.c"
	{
		MidoriDatabase* _tmp5_;
		const gchar* _tmp6_;
		gint64 _tmp7_;
		GDateTime* _tmp8_;
		gint64 _tmp9_ = 0LL;
		MidoriDatabaseStatement* _tmp10_ = NULL;
		MidoriDatabaseStatement* _tmp11_;
		MidoriDatabaseStatement* _tmp12_;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = database;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = sqlcmd;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = self->priv->_id;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = time;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = g_date_time_to_unix (_tmp8_);
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = midori_database_prepare (_tmp5_, _tmp6_, &_inner_error_, ":session_id", G_TYPE_INT64, _tmp7_, ":tstamp", G_TYPE_INT64, _tmp9_, NULL);
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = _tmp10_;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 5135 "tabby.c"
			goto __catch11_g_error;
		}
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _tmp11_;
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_statement_exec (_tmp12_, &_inner_error_);
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp12_);
#line 601 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 5146 "tabby.c"
			goto __catch11_g_error;
		}
	}
	goto __finally11;
	__catch11_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp13_ = NULL;
		GError* _tmp14_;
		const gchar* _tmp15_;
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 605 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp13_ = _ ("Failed to update database: %s");
#line 605 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _error_;
#line 605 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp15_ = _tmp14_->message;
#line 605 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp13_, _tmp15_);
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 5171 "tabby.c"
	}
	__finally11:
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_date_time_unref0 (time);
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 600 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return NULL;
#line 5186 "tabby.c"
	}
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_date_time_unref0 (time);
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 5194 "tabby.c"
}


TabbyLocalSession* tabby_local_session_new_with_id (MidoriDatabase* database, gint64 id) {
#line 593 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return tabby_local_session_construct_with_id (TABBY_LOCAL_TYPE_SESSION, database, id);
#line 5201 "tabby.c"
}


gint64 tabby_local_session_get_id (TabbyLocalSession* self) {
	gint64 result;
	gint64 _tmp0_;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, 0LL);
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->_id;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp0_;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5216 "tabby.c"
}


static void tabby_local_session_set_id (TabbyLocalSession* self, gint64 value) {
	gint64 _tmp0_;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = value;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->_id = _tmp0_;
#line 367 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_notify ((GObject *) self, "id");
#line 5230 "tabby.c"
}


static void tabby_local_session_class_init (TabbyLocalSessionClass * klass) {
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_local_session_parent_class = g_type_class_peek_parent (klass);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_type_class_add_private (klass, sizeof (TabbyLocalSessionPrivate));
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->add_item = tabby_local_session_real_add_item;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->uri_changed = tabby_local_session_real_uri_changed;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->data_changed = tabby_local_session_real_data_changed;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_added = tabby_local_session_real_tab_added;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_removed = tabby_local_session_real_tab_removed;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_switched = tabby_local_session_real_tab_switched;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->tab_reordered = tabby_local_session_real_tab_reordered;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->remove = tabby_local_session_real_remove;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->close = tabby_local_session_real_close;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->get_tabs = tabby_local_session_real_get_tabs;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_SESSION_CLASS (klass)->get_max_sorting = tabby_local_session_real_get_max_sorting;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_local_session_get_property;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_local_session_set_property;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_local_session_finalize;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_LOCAL_SESSION_ID, g_param_spec_int64 ("id", "id", "id", G_MININT64, G_MAXINT64, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
#line 5269 "tabby.c"
}


static void tabby_local_session_instance_init (TabbyLocalSession * self) {
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv = TABBY_LOCAL_SESSION_GET_PRIVATE (self);
#line 5276 "tabby.c"
}


static void tabby_local_session_finalize (GObject* obj) {
	TabbyLocalSession * self;
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_LOCAL_TYPE_SESSION, TabbyLocalSession);
#line 368 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->database);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (tabby_local_session_parent_class)->finalize (obj);
#line 5288 "tabby.c"
}


GType tabby_local_session_get_type (void) {
	static volatile gsize tabby_local_session_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_local_session_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyLocalSessionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_local_session_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyLocalSession), 0, (GInstanceInitFunc) tabby_local_session_instance_init, NULL };
		GType tabby_local_session_type_id;
		tabby_local_session_type_id = g_type_register_static (TABBY_BASE_TYPE_SESSION, "TabbyLocalSession", &g_define_type_info, 0);
		g_once_init_leave (&tabby_local_session_type_id__volatile, tabby_local_session_type_id);
	}
	return tabby_local_session_type_id__volatile;
}


static void _vala_tabby_local_session_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	TabbyLocalSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_LOCAL_TYPE_SESSION, TabbyLocalSession);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_LOCAL_SESSION_ID:
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_value_set_int64 (value, tabby_local_session_get_id (self));
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 5315 "tabby.c"
		default:
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 5321 "tabby.c"
	}
}


static void _vala_tabby_local_session_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	TabbyLocalSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_LOCAL_TYPE_SESSION, TabbyLocalSession);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	switch (property_id) {
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		case TABBY_LOCAL_SESSION_ID:
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_local_session_set_id (self, g_value_get_int64 (value));
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 5337 "tabby.c"
		default:
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 366 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		break;
#line 5343 "tabby.c"
	}
}


static KatzeArray* tabby_local_storage_real_get_saved_sessions (TabbyBaseStorage* base) {
	TabbyLocalStorage * self;
	KatzeArray* result = NULL;
	KatzeArray* _tmp0_;
	KatzeArray* sessions;
	gchar* _tmp1_;
	gchar* sqlcmd;
	KatzeArray* _tmp25_;
	gboolean _tmp26_ = FALSE;
	GError * _inner_error_ = NULL;
#line 613 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalStorage*) base;
#line 614 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = katze_array_new (TABBY_LOCAL_TYPE_SESSION);
#line 614 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sessions = _tmp0_;
#line 616 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = g_strdup ("\n" \
"                    SELECT id, closed FROM sessions WHERE closed = 0\n" \
"                    UNION\n" \
"                    SELECT * FROM (SELECT id, closed FROM sessions WHE" \
"RE closed = 1 ORDER BY tstamp DESC LIMIT 1)\n" \
"                    ORDER BY closed;\n" \
"                ");
#line 616 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	sqlcmd = _tmp1_;
#line 5368 "tabby.c"
	{
		MidoriDatabase* _tmp2_;
		const gchar* _tmp3_;
		MidoriDatabaseStatement* _tmp4_ = NULL;
		MidoriDatabaseStatement* statement;
#line 623 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = self->priv->database;
#line 623 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = sqlcmd;
#line 623 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = midori_database_prepare (_tmp2_, _tmp3_, &_inner_error_, NULL);
#line 623 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		statement = _tmp4_;
#line 623 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 5384 "tabby.c"
			goto __catch12_g_error;
		}
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		while (TRUE) {
#line 5389 "tabby.c"
			MidoriDatabaseStatement* _tmp5_;
			gboolean _tmp6_ = FALSE;
			gboolean _tmp7_;
			MidoriDatabaseStatement* _tmp8_;
			gint64 _tmp9_ = 0LL;
			gint64 id;
			MidoriDatabaseStatement* _tmp10_;
			gint64 _tmp11_ = 0LL;
			gint64 closed;
			gboolean _tmp12_ = FALSE;
			gint64 _tmp13_;
			gboolean _tmp16_;
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp5_ = statement;
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp6_ = midori_database_statement_step (_tmp5_, &_inner_error_);
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp7_ = _tmp6_;
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 5412 "tabby.c"
				goto __catch12_g_error;
			}
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (!_tmp7_) {
#line 624 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				break;
#line 5419 "tabby.c"
			}
#line 625 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp8_ = statement;
#line 625 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp9_ = midori_database_statement_get_int64 (_tmp8_, "id", &_inner_error_);
#line 625 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			id = _tmp9_;
#line 625 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 625 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 5431 "tabby.c"
				goto __catch12_g_error;
			}
#line 626 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp10_ = statement;
#line 626 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp11_ = midori_database_statement_get_int64 (_tmp10_, "closed", &_inner_error_);
#line 626 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			closed = _tmp11_;
#line 626 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 626 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (statement);
#line 5444 "tabby.c"
				goto __catch12_g_error;
			}
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = closed;
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_tmp13_ == ((gint64) 0)) {
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp12_ = TRUE;
#line 5453 "tabby.c"
			} else {
				KatzeArray* _tmp14_;
				gboolean _tmp15_ = FALSE;
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp14_ = sessions;
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp15_ = katze_array_is_empty (_tmp14_);
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp12_ = _tmp15_;
#line 5463 "tabby.c"
			}
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp16_ = _tmp12_;
#line 627 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_tmp16_) {
#line 5469 "tabby.c"
				KatzeArray* _tmp17_;
				MidoriDatabase* _tmp18_;
				gint64 _tmp19_;
				TabbyLocalSession* _tmp20_;
				TabbyLocalSession* _tmp21_;
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp17_ = sessions;
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp18_ = self->priv->database;
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp19_ = id;
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp20_ = tabby_local_session_new_with_id (_tmp18_, _tmp19_);
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp21_ = _tmp20_;
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				g_signal_emit_by_name (_tmp17_, "add-item", (GObject*) _tmp21_);
#line 628 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (_tmp21_);
#line 5489 "tabby.c"
			}
		}
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (statement);
#line 5494 "tabby.c"
	}
	goto __finally12;
	__catch12_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp22_ = NULL;
		GError* _tmp23_;
		const gchar* _tmp24_;
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 632 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp22_ = _ ("Failed to select from database: %s");
#line 632 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp23_ = _error_;
#line 632 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp24_ = _tmp23_->message;
#line 632 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp22_, _tmp24_);
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 5517 "tabby.c"
	}
	__finally12:
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (sqlcmd);
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (sessions);
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 622 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return NULL;
#line 5532 "tabby.c"
	}
#line 635 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp25_ = sessions;
#line 635 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp26_ = katze_array_is_empty (_tmp25_);
#line 635 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp26_) {
#line 5540 "tabby.c"
		KatzeArray* _tmp27_;
		MidoriDatabase* _tmp28_;
		TabbyLocalSession* _tmp29_;
		TabbyLocalSession* _tmp30_;
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp27_ = sessions;
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp28_ = self->priv->database;
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp29_ = tabby_local_session_new (_tmp28_);
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp30_ = _tmp29_;
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_signal_emit_by_name (_tmp27_, "add-item", (GObject*) _tmp30_);
#line 636 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp30_);
#line 5557 "tabby.c"
	}
#line 639 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = sessions;
#line 639 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_free0 (sqlcmd);
#line 639 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5565 "tabby.c"
}


static Block3Data* block3_data_ref (Block3Data* _data3_) {
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_atomic_int_inc (&_data3_->_ref_count_);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return _data3_;
#line 5574 "tabby.c"
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
#line 5583 "tabby.c"
		TabbyLocalStorage * self;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		self = _data3_->self;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_data3_->tabs);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (self);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_slice_free (Block3Data, _data3_);
#line 5593 "tabby.c"
	}
}


static gboolean ___lambda7_ (Block3Data* _data3_, GError** error) {
	TabbyLocalStorage * self;
	gboolean result = FALSE;
	KatzeArray* _tmp0_;
#line 644 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = _data3_->self;
#line 645 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = _data3_->tabs;
#line 645 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (tabby_local_storage_parent_class)->import_session (G_TYPE_CHECK_INSTANCE_CAST (self, TABBY_BASE_TYPE_STORAGE, TabbyBaseStorage), _tmp0_);
#line 645 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = TRUE;
#line 645 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5612 "tabby.c"
}


static gboolean ____lambda7__midori_database_callback (gpointer self, GError** error) {
	gboolean result;
	result = ___lambda7_ (self, error);
#line 644 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5621 "tabby.c"
}


static void tabby_local_storage_real_import_session (TabbyBaseStorage* base, KatzeArray* tabs) {
	TabbyLocalStorage * self;
	Block3Data* _data3_;
	KatzeArray* _tmp0_;
	KatzeArray* _tmp1_;
	GError * _inner_error_ = NULL;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalStorage*) base;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (tabs != NULL);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data3_ = g_slice_new0 (Block3Data);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data3_->_ref_count_ = 1;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data3_->self = g_object_ref (self);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabs;
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_data3_->tabs);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data3_->tabs = _tmp1_;
#line 5649 "tabby.c"
	{
		MidoriDatabase* _tmp2_;
#line 644 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = self->priv->database;
#line 644 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_database_transaction (_tmp2_, ____lambda7__midori_database_callback, _data3_, &_inner_error_);
#line 644 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 5658 "tabby.c"
			goto __catch13_g_error;
		}
	}
	goto __finally13;
	__catch13_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp3_ = NULL;
		GError* _tmp4_;
		const gchar* _tmp5_;
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_error_ = _inner_error_;
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 648 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = _ ("Failed to select from database: %s");
#line 648 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = _error_;
#line 648 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = _tmp4_->message;
#line 648 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical (_tmp3_, _tmp5_);
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (_error_);
#line 5683 "tabby.c"
	}
	__finally13:
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		block3_data_unref (_data3_);
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_data3_ = NULL;
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 643 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return;
#line 5698 "tabby.c"
	}
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	block3_data_unref (_data3_);
#line 642 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_data3_ = NULL;
#line 5704 "tabby.c"
}


static TabbyBaseSession* tabby_local_storage_real_get_new_session (TabbyBaseStorage* base) {
	TabbyLocalStorage * self;
	TabbyBaseSession* result = NULL;
	MidoriDatabase* _tmp0_;
	TabbyLocalSession* _tmp1_;
	TabbyBaseSession* _tmp2_;
#line 652 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalStorage*) base;
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = self->priv->database;
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = tabby_local_session_new (_tmp0_);
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp1_, TABBY_BASE_TYPE_SESSION) ? ((TabbyBaseSession*) _tmp1_) : NULL;
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp2_ == NULL) {
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp1_);
#line 5726 "tabby.c"
	}
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = _tmp2_;
#line 653 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5732 "tabby.c"
}


TabbyLocalStorage* tabby_local_storage_construct (GType object_type, MidoriApp* app) {
	TabbyLocalStorage * self = NULL;
	MidoriApp* _tmp0_;
	MidoriDatabase* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	GError * _inner_error_ = NULL;
#line 656 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (app != NULL, NULL);
#line 657 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = app;
#line 657 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyLocalStorage*) g_object_new (object_type, "app", _tmp0_, NULL);
#line 5749 "tabby.c"
	{
		MidoriDatabase* _tmp1_;
		MidoriDatabase* _tmp2_;
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp1_ = midori_database_new ("tabby.db", &_inner_error_);
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp2_ = _tmp1_;
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_->domain == MIDORI_DATABASE_ERROR) {
#line 5761 "tabby.c"
				goto __catch14_midori_database_error;
			}
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_clear_error (&_inner_error_);
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			return NULL;
#line 5770 "tabby.c"
		}
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (self->priv->database);
#line 660 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		self->priv->database = _tmp2_;
#line 5776 "tabby.c"
	}
	goto __finally14;
	__catch14_midori_database_error:
	{
		GError* schema_error = NULL;
		const gchar* _tmp3_;
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		schema_error = _inner_error_;
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_inner_error_ = NULL;
#line 662 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp3_ = schema_error->message;
#line 662 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_error ("tabby.vala:662: %s", _tmp3_);
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_error_free0 (schema_error);
#line 5793 "tabby.c"
	}
	__finally14:
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_inner_error_ != NULL) {
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_clear_error (&_inner_error_);
#line 659 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		return NULL;
#line 5804 "tabby.c"
	}
#line 665 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = self->priv->database;
#line 665 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = midori_database_get_first_use (_tmp4_);
#line 665 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp6_ = _tmp5_;
#line 665 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp6_) {
#line 5814 "tabby.c"
		gchar* _tmp7_ = NULL;
		gchar* config_file;
#line 666 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = midori_paths_get_config_filename_for_reading ("session.xbel");
#line 666 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		config_file = _tmp7_;
#line 5821 "tabby.c"
		{
			KatzeArray* _tmp8_;
			KatzeArray* old_session;
			KatzeArray* _tmp9_;
			const gchar* _tmp10_;
			KatzeArray* _tmp11_;
#line 668 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp8_ = katze_array_new (KATZE_TYPE_ITEM);
#line 668 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			old_session = _tmp8_;
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp9_ = old_session;
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp10_ = config_file;
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			midori_array_from_file (_tmp9_, _tmp10_, "xbel-tiny", &_inner_error_);
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			if (_inner_error_ != NULL) {
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_g_object_unref0 (old_session);
#line 669 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				if (_inner_error_->domain == G_FILE_ERROR) {
#line 5844 "tabby.c"
					goto __catch15_g_file_error;
				}
				goto __catch15_g_error;
			}
#line 670 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp11_ = old_session;
#line 670 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			tabby_base_storage_import_session ((TabbyBaseStorage*) self, _tmp11_);
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (old_session);
#line 5855 "tabby.c"
		}
		goto __finally15;
		__catch15_g_file_error:
		{
			GError* file_error = NULL;
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			file_error = _inner_error_;
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_inner_error_ = NULL;
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_error_free0 (file_error);
#line 5867 "tabby.c"
		}
		goto __finally15;
		__catch15_g_error:
		{
			GError* _error_ = NULL;
			const gchar* _tmp12_ = NULL;
			GError* _tmp13_;
			const gchar* _tmp14_;
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_error_ = _inner_error_;
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_inner_error_ = NULL;
#line 674 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp12_ = _ ("Failed to import legacy session: %s");
#line 674 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = _error_;
#line 674 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp14_ = _tmp13_->message;
#line 674 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_critical (_tmp12_, _tmp14_);
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_error_free0 (_error_);
#line 5890 "tabby.c"
		}
		__finally15:
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_inner_error_ != NULL) {
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_free0 (config_file);
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_clear_error (&_inner_error_);
#line 667 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			return NULL;
#line 5903 "tabby.c"
		}
#line 665 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_free0 (config_file);
#line 5907 "tabby.c"
	}
#line 656 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 5911 "tabby.c"
}


TabbyLocalStorage* tabby_local_storage_new (MidoriApp* app) {
#line 656 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return tabby_local_storage_construct (TABBY_LOCAL_TYPE_STORAGE, app);
#line 5918 "tabby.c"
}


static void tabby_local_storage_class_init (TabbyLocalStorageClass * klass) {
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_local_storage_parent_class = g_type_class_peek_parent (klass);
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_type_class_add_private (klass, sizeof (TabbyLocalStoragePrivate));
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->get_saved_sessions = tabby_local_storage_real_get_saved_sessions;
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->import_session = tabby_local_storage_real_import_session;
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	TABBY_BASE_STORAGE_CLASS (klass)->get_new_session = tabby_local_storage_real_get_new_session;
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_local_storage_finalize;
#line 5935 "tabby.c"
}


static void tabby_local_storage_instance_init (TabbyLocalStorage * self) {
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv = TABBY_LOCAL_STORAGE_GET_PRIVATE (self);
#line 5942 "tabby.c"
}


static void tabby_local_storage_finalize (GObject* obj) {
	TabbyLocalStorage * self;
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_LOCAL_TYPE_STORAGE, TabbyLocalStorage);
#line 611 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->database);
#line 610 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (tabby_local_storage_parent_class)->finalize (obj);
#line 5954 "tabby.c"
}


GType tabby_local_storage_get_type (void) {
	static volatile gsize tabby_local_storage_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_local_storage_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyLocalStorageClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_local_storage_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyLocalStorage), 0, (GInstanceInitFunc) tabby_local_storage_instance_init, NULL };
		GType tabby_local_storage_type_id;
		tabby_local_storage_type_id = g_type_register_static (TABBY_BASE_TYPE_STORAGE, "TabbyLocalStorage", &g_define_type_info, 0);
		g_once_init_leave (&tabby_local_storage_type_id__volatile, tabby_local_storage_type_id);
	}
	return tabby_local_storage_type_id__volatile;
}


static gboolean _tabby_manager_execute_commands_gsource_func (gpointer self) {
	gboolean result;
	result = tabby_manager_execute_commands (self);
#line 695 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 5975 "tabby.c"
}


static gboolean tabby_manager_load_session (TabbyManager* self) {
	gboolean result = FALSE;
	gint load_on_startup = 0;
	MidoriApp* _tmp0_;
	MidoriWebSettings* _tmp1_ = NULL;
	MidoriWebSettings* _tmp2_;
	MidoriWebSettings* _tmp3_;
	gboolean _tmp4_ = FALSE;
	gint _tmp5_;
	gboolean _tmp7_;
#line 683 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_APP;
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get (_tmp0_, "settings", &_tmp1_, NULL);
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _tmp1_;
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = _tmp2_;
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_object_get ((GObject*) _tmp3_, "load-on-startup", &load_on_startup, NULL);
#line 686 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (_tmp3_);
#line 687 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp5_ = load_on_startup;
#line 687 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp5_ == ((gint) MIDORI_STARTUP_BLANK_PAGE)) {
#line 687 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = TRUE;
#line 6009 "tabby.c"
	} else {
		gint _tmp6_;
#line 688 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = load_on_startup;
#line 688 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = _tmp6_ == ((gint) MIDORI_STARTUP_HOMEPAGE);
#line 6016 "tabby.c"
	}
#line 687 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp7_ = _tmp4_;
#line 687 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp7_) {
#line 6022 "tabby.c"
		TabbyBaseStorage* _tmp8_;
#line 689 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = self->priv->storage;
#line 689 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_storage_start_new_session (_tmp8_);
#line 6028 "tabby.c"
	} else {
		TabbyBaseStorage* _tmp9_;
#line 691 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = self->priv->storage;
#line 691 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_istorage_restore_last_sessions ((TabbyIStorage*) _tmp9_);
#line 6035 "tabby.c"
	}
#line 695 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _tabby_manager_execute_commands_gsource_func, g_object_ref (self), g_object_unref);
#line 697 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = FALSE;
#line 697 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 6043 "tabby.c"
}


static gboolean tabby_manager_execute_commands (TabbyManager* self) {
	gboolean result = FALSE;
	MidoriApp* _tmp0_ = NULL;
	MidoriApp* _tmp1_;
	MidoriApp* app;
	MidoriApp* _tmp2_;
	gconstpointer _tmp3_ = NULL;
	gchar** commands;
	gint commands_length1;
	gint _commands_size_;
	gchar** _tmp4_;
	gint _tmp4__length1;
#line 700 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 701 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = midori_extension_get_app ((MidoriExtension*) self);
#line 701 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 701 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	app = _tmp1_;
#line 702 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = app;
#line 702 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = g_object_get_data ((GObject*) _tmp2_, "execute-commands");
#line 702 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	commands = _tmp3_;
#line 702 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	commands_length1 = -1;
#line 702 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_commands_size_ = commands_length1;
#line 704 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = commands;
#line 704 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4__length1 = commands_length1;
#line 704 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp4_ != NULL) {
#line 6083 "tabby.c"
		MidoriApp* _tmp5_;
		gchar** _tmp6_;
		gint _tmp6__length1;
#line 705 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = app;
#line 705 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = commands;
#line 705 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6__length1 = commands_length1;
#line 705 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		midori_app_send_command (_tmp5_, _tmp6_);
#line 6095 "tabby.c"
	}
#line 708 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = FALSE;
#line 708 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (app);
#line 708 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 6103 "tabby.c"
}


static void _tabby_manager_set_open_uris_midori_app_add_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self) {
#line 731 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_set_open_uris (self, browser);
#line 6110 "tabby.c"
}


static void tabby_manager_set_open_uris (TabbyManager* self, MidoriBrowser* browser) {
	MidoriApp* _tmp0_ = NULL;
	MidoriApp* _tmp1_;
	MidoriApp* app;
	MidoriApp* _tmp2_;
	gconstpointer _tmp3_ = NULL;
	gchar** uris;
	gint uris_length1;
	gint _uris_size_;
	gchar** _tmp4_;
	gint _tmp4__length1;
	MidoriApp* _tmp33_;
	guint _tmp34_ = 0U;
#line 711 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 711 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 712 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = midori_extension_get_app ((MidoriExtension*) self);
#line 712 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 712 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	app = _tmp1_;
#line 713 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = app;
#line 713 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = g_object_get_data ((GObject*) _tmp2_, "open-uris");
#line 713 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	uris = _tmp3_;
#line 713 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	uris_length1 = -1;
#line 713 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_uris_size_ = uris_length1;
#line 715 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = uris;
#line 715 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4__length1 = uris_length1;
#line 715 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp4_ != NULL) {
#line 6153 "tabby.c"
		KatzeArray* _tmp5_;
		KatzeArray* tabs;
		KatzeArray* _tmp28_;
		gboolean _tmp29_ = FALSE;
#line 716 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = katze_array_new (KATZE_TYPE_ITEM);
#line 716 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabs = _tmp5_;
#line 6162 "tabby.c"
		{
			gint i;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			i = 0;
#line 6167 "tabby.c"
			{
				gboolean _tmp6_;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				_tmp6_ = TRUE;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
				while (TRUE) {
#line 6174 "tabby.c"
					gboolean _tmp7_;
					gchar** _tmp9_;
					gint _tmp9__length1;
					gint _tmp10_;
					const gchar* _tmp11_;
					KatzeItem* _tmp12_;
					KatzeItem* item;
					KatzeItem* _tmp13_;
					gchar** _tmp14_;
					gint _tmp14__length1;
					gint _tmp15_;
					const gchar* _tmp16_;
					KatzeItem* _tmp17_;
					gchar** _tmp18_;
					gint _tmp18__length1;
					gint _tmp19_;
					const gchar* _tmp20_;
					gchar* _tmp21_ = NULL;
					gchar* _tmp22_;
					KatzeItem* _tmp23_;
					const gchar* _tmp24_;
					const gchar* _tmp25_;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp7_ = _tmp6_;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (!_tmp7_) {
#line 6201 "tabby.c"
						gint _tmp8_;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp8_ = i;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						i = _tmp8_ + 1;
#line 6207 "tabby.c"
					}
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp6_ = FALSE;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp9_ = uris;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp9__length1 = uris_length1;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp10_ = i;
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp11_ = _tmp9_[_tmp10_];
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (!(_tmp11_ != NULL)) {
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						break;
#line 6223 "tabby.c"
					}
#line 719 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp12_ = katze_item_new ();
#line 719 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					item = _tmp12_;
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp13_ = item;
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp14_ = uris;
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp14__length1 = uris_length1;
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp15_ = i;
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp16_ = _tmp14_[_tmp15_];
#line 720 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					katze_item_set_name (_tmp13_, _tmp16_);
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp17_ = item;
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp18_ = uris;
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp18__length1 = uris_length1;
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp19_ = i;
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp20_ = _tmp18_[_tmp19_];
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp21_ = sokoke_magic_uri (_tmp20_, TRUE, TRUE);
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp22_ = _tmp21_;
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					katze_item_set_uri (_tmp17_, _tmp22_);
#line 721 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_g_free0 (_tmp22_);
#line 722 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp23_ = item;
#line 722 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp24_ = katze_item_get_uri (_tmp23_);
#line 722 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_tmp25_ = _tmp24_;
#line 722 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					if (_tmp25_ != NULL) {
#line 6267 "tabby.c"
						KatzeArray* _tmp26_;
						KatzeItem* _tmp27_;
#line 723 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp26_ = tabs;
#line 723 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						_tmp27_ = item;
#line 723 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
						g_signal_emit_by_name (_tmp26_, "add-item", (GObject*) _tmp27_);
#line 6276 "tabby.c"
					}
#line 718 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
					_g_object_unref0 (item);
#line 6280 "tabby.c"
				}
			}
		}
#line 726 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp28_ = tabs;
#line 726 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp29_ = katze_array_is_empty (_tmp28_);
#line 726 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (!_tmp29_) {
#line 6290 "tabby.c"
			MidoriBrowser* _tmp30_;
			KatzeArray* _tmp31_;
			KatzeArray* _tmp32_;
#line 727 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp30_ = browser;
#line 727 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp31_ = tabs;
#line 727 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp32_ = _g_object_ref0 (_tmp31_);
#line 727 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			g_object_set_data_full ((GObject*) _tmp30_, "tabby-open-uris", _tmp32_, g_object_unref);
#line 6302 "tabby.c"
		}
#line 715 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (tabs);
#line 6306 "tabby.c"
	}
#line 731 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp33_ = app;
#line 731 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_parse_name ("add-browser", MIDORI_TYPE_APP, &_tmp34_, NULL, FALSE);
#line 731 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_handlers_disconnect_matched (_tmp33_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp34_, 0, NULL, (GCallback) _tabby_manager_set_open_uris_midori_app_add_browser, self);
#line 711 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (app);
#line 6316 "tabby.c"
}


static void tabby_manager_browser_added (TabbyManager* self, MidoriBrowser* browser) {
	MidoriBrowser* _tmp0_;
	gconstpointer _tmp1_ = NULL;
	TabbyBaseSession* _tmp2_;
	TabbyBaseSession* session;
	TabbyBaseSession* _tmp3_;
#line 734 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 734 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 735 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = browser;
#line 735 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = g_object_get_data ((GObject*) _tmp0_, "tabby-session");
#line 735 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _g_object_ref0 ((TabbyBaseSession*) _tmp1_);
#line 735 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	session = _tmp2_;
#line 736 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = session;
#line 736 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp3_ == NULL) {
#line 6342 "tabby.c"
		TabbyBaseStorage* _tmp4_;
		TabbyBaseSession* _tmp5_ = NULL;
		TabbyBaseSession* _tmp6_;
		MidoriBrowser* _tmp7_;
		TabbyBaseSession* _tmp8_;
		TabbyBaseSession* _tmp9_;
		TabbyBaseSession* _tmp10_;
		MidoriBrowser* _tmp11_;
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = self->priv->storage;
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = tabby_base_storage_get_new_session (_tmp4_);
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp5_, TABBY_BASE_TYPE_SESSION) ? ((TabbyBaseSession*) _tmp5_) : NULL;
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp6_ == NULL) {
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_g_object_unref0 (_tmp5_);
#line 6361 "tabby.c"
		}
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (session);
#line 737 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		session = _tmp6_;
#line 738 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = browser;
#line 738 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = session;
#line 738 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp9_ = _g_object_ref0 (_tmp8_);
#line 738 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_set_data_full ((GObject*) _tmp7_, "tabby-session", _tmp9_, g_object_unref);
#line 739 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = session;
#line 739 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = browser;
#line 739 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_isession_attach ((TabbyISession*) _tmp10_, _tmp11_);
#line 6381 "tabby.c"
	}
#line 734 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (session);
#line 6385 "tabby.c"
}


static void tabby_manager_browser_removed (TabbyManager* self, MidoriBrowser* browser) {
	MidoriBrowser* _tmp0_;
	gconstpointer _tmp1_ = NULL;
	TabbyBaseSession* _tmp2_;
	TabbyBaseSession* session;
	TabbyBaseSession* _tmp3_;
#line 743 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 743 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (browser != NULL);
#line 744 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = browser;
#line 744 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = g_object_get_data ((GObject*) _tmp0_, "tabby-session");
#line 744 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = _g_object_ref0 ((TabbyBaseSession*) _tmp1_);
#line 744 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	session = _tmp2_;
#line 745 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = session;
#line 745 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp3_ == NULL) {
#line 746 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_warning ("tabby.vala:746: missing session");
#line 6413 "tabby.c"
	} else {
		TabbyBaseSession* _tmp4_;
		gint load_on_startup = 0;
		MidoriApp* _tmp5_;
		MidoriWebSettings* _tmp6_ = NULL;
		MidoriWebSettings* _tmp7_;
		MidoriWebSettings* _tmp8_;
		gboolean _tmp9_ = FALSE;
		MidoriBrowser* _tmp10_;
		gboolean _tmp11_;
		gboolean _tmp12_;
		gboolean _tmp14_;
#line 748 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = session;
#line 748 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		tabby_base_session_close (_tmp4_);
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = tabby_APP;
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_get (_tmp5_, "settings", &_tmp6_, NULL);
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp7_ = _tmp6_;
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp8_ = _tmp7_;
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		g_object_get ((GObject*) _tmp8_, "load-on-startup", &load_on_startup, NULL);
#line 752 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp8_);
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp10_ = browser;
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp11_ = gtk_window_get_destroy_with_parent ((GtkWindow*) _tmp10_);
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp12_ = _tmp11_;
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp12_) {
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp9_ = TRUE;
#line 6452 "tabby.c"
		} else {
			gint _tmp13_;
#line 755 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp13_ = load_on_startup;
#line 755 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp9_ = _tmp13_ < ((gint) MIDORI_STARTUP_LAST_OPEN_PAGES);
#line 6459 "tabby.c"
		}
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp14_ = _tmp9_;
#line 754 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp14_) {
#line 6465 "tabby.c"
			TabbyBaseSession* _tmp15_;
#line 757 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp15_ = session;
#line 757 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			tabby_base_session_remove (_tmp15_);
#line 6471 "tabby.c"
		}
	}
#line 743 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (session);
#line 6476 "tabby.c"
}


static void _tabby_manager_browser_added_midori_app_add_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self) {
#line 776 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_browser_added (self, browser);
#line 6483 "tabby.c"
}


static void _tabby_manager_browser_removed_midori_app_remove_browser (MidoriApp* _sender, MidoriBrowser* browser, gpointer self) {
#line 777 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_browser_removed (self, browser);
#line 6490 "tabby.c"
}


static gboolean _tabby_manager_load_session_gsource_func (gpointer self) {
	gboolean result;
	result = tabby_manager_load_session (self);
#line 779 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 6499 "tabby.c"
}


static void tabby_manager_activated (TabbyManager* self, MidoriApp* app) {
	MidoriApp* _tmp0_;
	MidoriApp* _tmp1_;
	const gchar* _tmp2_ = NULL;
	const gchar* restore_count;
	const gchar* _tmp3_;
	MidoriApp* _tmp8_ = NULL;
	TabbyLocalStorage* _tmp9_;
	TabbyBaseStorage* _tmp10_;
	MidoriApp* _tmp11_;
	MidoriApp* _tmp12_;
	MidoriApp* _tmp13_;
#line 762 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 762 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (app != NULL);
#line 763 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = app;
#line 763 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 763 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (tabby_APP);
#line 763 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_APP = _tmp1_;
#line 764 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = g_getenv ("TABBY_RESTORE_COUNT");
#line 764 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	restore_count = _tmp2_;
#line 765 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp3_ = restore_count;
#line 765 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp3_ != NULL) {
#line 6535 "tabby.c"
		const gchar* _tmp4_;
		gint _tmp5_ = 0;
		gint count;
		gint _tmp6_;
#line 766 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp4_ = restore_count;
#line 766 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp5_ = atoi (_tmp4_);
#line 766 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		count = _tmp5_;
#line 767 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_tmp6_ = count;
#line 767 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		if (_tmp6_ >= 1) {
#line 6550 "tabby.c"
			gint _tmp7_;
#line 768 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			_tmp7_ = count;
#line 768 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
			tabby_IDLE_RESTORE_COUNT = _tmp7_;
#line 6556 "tabby.c"
		}
	}
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp8_ = midori_extension_get_app ((MidoriExtension*) self);
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp9_ = tabby_local_storage_new (_tmp8_);
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp10_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp9_, TABBY_BASE_TYPE_STORAGE) ? ((TabbyBaseStorage*) _tmp9_) : NULL;
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	if (_tmp10_ == NULL) {
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
		_g_object_unref0 (_tmp9_);
#line 6569 "tabby.c"
	}
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->storage);
#line 773 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->storage = _tmp10_;
#line 775 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp11_ = app;
#line 775 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp11_, "add-browser", (GCallback) _tabby_manager_set_open_uris_midori_app_add_browser, self, 0);
#line 776 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp12_ = app;
#line 776 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp12_, "add-browser", (GCallback) _tabby_manager_browser_added_midori_app_add_browser, self, 0);
#line 777 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp13_ = app;
#line 777 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object (_tmp13_, "remove-browser", (GCallback) _tabby_manager_browser_removed_midori_app_remove_browser, self, 0);
#line 779 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _tabby_manager_load_session_gsource_func, g_object_ref (self), g_object_unref);
#line 6589 "tabby.c"
}


static void tabby_manager_deactivated (TabbyManager* self) {
	MidoriApp* _tmp0_;
	guint _tmp1_ = 0U;
	MidoriApp* _tmp2_;
	guint _tmp3_ = 0U;
	MidoriApp* _tmp4_;
	guint _tmp5_ = 0U;
#line 782 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_return_if_fail (self != NULL);
#line 785 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_APP;
#line 785 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_parse_name ("add-browser", MIDORI_TYPE_APP, &_tmp1_, NULL, FALSE);
#line 785 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _tabby_manager_set_open_uris_midori_app_add_browser, self);
#line 786 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp2_ = tabby_APP;
#line 786 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_parse_name ("add-browser", MIDORI_TYPE_APP, &_tmp3_, NULL, FALSE);
#line 786 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _tabby_manager_browser_added_midori_app_add_browser, self);
#line 787 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp4_ = tabby_APP;
#line 787 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_parse_name ("remove-browser", MIDORI_TYPE_APP, &_tmp5_, NULL, FALSE);
#line 787 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_handlers_disconnect_matched (_tmp4_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _tabby_manager_browser_removed_midori_app_remove_browser, self);
#line 788 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (tabby_APP);
#line 788 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_APP = NULL;
#line 790 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->storage);
#line 790 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv->storage = NULL;
#line 6628 "tabby.c"
}


static void _tabby_manager_activated_midori_extension_activate (MidoriExtension* _sender, MidoriApp* app, gpointer self) {
#line 799 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_activated (self, app);
#line 6635 "tabby.c"
}


static void _tabby_manager_deactivated_midori_extension_deactivate (MidoriExtension* _sender, gpointer self) {
#line 800 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_deactivated (self);
#line 6642 "tabby.c"
}


TabbyManager* tabby_manager_construct (GType object_type) {
	TabbyManager * self = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
#line 794 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = _ ("Tabby");
#line 794 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp1_ = _ ("Tab and session management.");
#line 794 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = (TabbyManager*) g_object_new (object_type, "name", _tmp0_, "description", _tmp1_, "version", "0.1", "authors", "André Stösel <andre@stoesel.de>", NULL);
#line 799 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object ((MidoriExtension*) self, "activate", (GCallback) _tabby_manager_activated_midori_extension_activate, self, 0);
#line 800 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_signal_connect_object ((MidoriExtension*) self, "deactivate", (GCallback) _tabby_manager_deactivated_midori_extension_deactivate, self, 0);
#line 793 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return self;
#line 6662 "tabby.c"
}


TabbyManager* tabby_manager_new (void) {
#line 793 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return tabby_manager_construct (TABBY_TYPE_MANAGER);
#line 6669 "tabby.c"
}


static void tabby_manager_class_init (TabbyManagerClass * klass) {
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	tabby_manager_parent_class = g_type_class_peek_parent (klass);
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	g_type_class_add_private (klass, sizeof (TabbyManagerPrivate));
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_manager_finalize;
#line 6680 "tabby.c"
}


static void tabby_manager_instance_init (TabbyManager * self) {
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self->priv = TABBY_MANAGER_GET_PRIVATE (self);
#line 6687 "tabby.c"
}


static void tabby_manager_finalize (GObject* obj) {
	TabbyManager * self;
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_TYPE_MANAGER, TabbyManager);
#line 682 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_g_object_unref0 (self->priv->storage);
#line 681 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	G_OBJECT_CLASS (tabby_manager_parent_class)->finalize (obj);
#line 6699 "tabby.c"
}


GType tabby_manager_get_type (void) {
	static volatile gsize tabby_manager_type_id__volatile = 0;
	if (g_once_init_enter (&tabby_manager_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TabbyManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyManager), 0, (GInstanceInitFunc) tabby_manager_instance_init, NULL };
		GType tabby_manager_type_id;
		tabby_manager_type_id = g_type_register_static (MIDORI_TYPE_EXTENSION, "TabbyManager", &g_define_type_info, 0);
		g_once_init_leave (&tabby_manager_type_id__volatile, tabby_manager_type_id);
	}
	return tabby_manager_type_id__volatile;
}


MidoriExtension* extension_init (void) {
	MidoriExtension* result = NULL;
	TabbyManager* _tmp0_;
#line 806 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	_tmp0_ = tabby_manager_new ();
#line 806 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	result = (MidoriExtension*) _tmp0_;
#line 806 "/home/zrl/epiphany_webkit/Webkit2Browser/Source/midori/extensions/tabby.vala"
	return result;
#line 6724 "tabby.c"
}



